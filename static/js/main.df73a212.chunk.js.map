{"version":3,"sources":["config/firebase.js","components/users/AccountManagement.js","components/users/Login.js","components/Home.js","components/users/Signup.js","components/Splash.js","components/accordion.js","components/MyWorkouts.js","components/reports/MyWorkouts.js","components/workout/WorkoutCard.js","components/workout/RestTimer.js","components/workout/Workout.js","components/creators/CreationCenter.js","components/creators/EditExercise.js","components/creators/CreateExercise.js","components/creators/EditExercises.js","components/creators/CreateWorkout.js","components/user-workouts/CreateUserWorkout.js","components/creators/WorkoutSelector.js","components/creators/CreateCustomWorkout.js","components/creators/EditWorkout.js","components/creators/EditWorkouts.js","components/calendar/Calendar.js","components/standard-page-parts/AppTabBar.js","App.js","index.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","FirebaseContext","createContext","children","firebase","app","auth","authCredential","user","database","analytics","getApps","length","initializeApp","getAuth","getAnalytics","getFirestore","api","Provider","value","cardStyle","backgroundColor","width","marginTop","padding","cardHeader","display","justifyContent","passwordStyle","m","minWidth","accountButton","marginLeft","marginBottom","accountAlert","maxWidth","textStyle","AccountManagement","props","state","currentPassword","showCurrentPassword","newPassword","confirmPassword","showNewPassword","passwordUpdated","updateFailure","failureMessage","openDeleteDialog","name","height","weight","handleTextBoxChange","bind","handleMouseDownShowCurrPassword","handleMouseUpShowCurrPassword","handleMouseDownShowNewPassword","handleMouseUpShowNewPassword","updatePassword","deleteUserDialog","handleCloseDeleteDialog","deleteUser","e","target","id","this","setState","preventDefault","a","context","credential","EmailAuthProvider","email","reauthenticateWithCredential","then","userCredential","catch","error","deleteHandler","style","Typography","variant","sx","Card","FormControl","required","InputLabel","htmlFor","OutlinedInput","type","onChange","endAdornment","InputAdornment","position","IconButton","onMouseUp","onMouseDown","edge","label","Alert","onClose","severity","Button","onClick","updateUserDetails","color","Dialog","open","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","React","Component","contextType","boxStyle","top","left","transform","bgcolor","boxShadow","p","inputStyle","stopPropagationForTab","event","key","stopPropagation","Login","password","showPassword","loggingIn","errorMessage","handlePasswordChange","handleClickShowPassword","handleMouseDownShowPassword","handleEmailChange","handleSubmit","handleModalStateChange","openModal","buttonFlag","closeMenu","errorFromApp","errorDesc","loginHandler","appLoginHandler","fullWidth","margin","MenuItem","Modal","onKeyDown","Box","marginRight","CircularProgress","homeButton","textDecoration","Home","dateString","date","Date","getFullYear","getMonth","getDate","workouts","fetchComplete","creator","uid","doc","userRef","q","query","collection","where","onSnapshot","querySnapshot","forEach","data","push","getDoc","workout","docSnap","newWorkouts","fetchCompleted","CardMedia","component","src","Grid","container","item","xs","fontSize","mb","to","size","CardActions","orientation","Accordion","withStyles","root","expanded","MuiAccordion","modalBox","SignUp","signingUp","tooltip","canSubmit","handleNameChange","handleHeightChange","handleWeightChange","handleSignUpProcessing","checkIfValid","invalid","emailRegex","RegExp","test","splash","signUpSubmit","appSignUpHandler","AccordionSummary","AccordionDetails","Tooltip","title","map","x","disabled","Splash","ref","loginRef","showSignUp","signUpRef","signUpOpen","signUp","MyAccordion","exercises","redirect","userWorkout","scheduleWorkout","newExercises","i","exerciseId","exerciseSnap","exercise","sets","workoutRef","set","reps","addDoc","completed","console","log","flexShrink","targetMuscleGroup","Divider","Table","TableHead","TableRow","TableCell","TableBody","s","index","dominantMuscle","Workouts","search","muscleGroup","startWorkoutOpen","handleSearchBoxChange","handleMuscleGroupChange","switchModalState","toLowerCase","includes","newPage","page","workoutCreateOpen","spacing","TextField","Select","labelId","filter","filterBySearch","filterByMuscleGroup","styled","disableGutters","elevation","square","theme","border","palette","divider","borderBottom","expandIcon","mode","flexDirection","MuiAccordionDetails","borderTop","MyWorkouts","handleChange","panel","setTime","seconds","workoutSnap","cursor","paddingLeft","fontWeight","setHeader","exerciseInput","exerciseButton","Exercise","currSet","details","currExercise","shrink","undefined","overrideWorkoutSet","handleTextChange","handleDoubleClick","handleBlur","shrinkInput","expandInput","parseFloat","prevProps","prevState","blurFunction","saveExercise","exerciseIndex","onBlur","onDoubleClick","alignItems","Sets","exerciseGuide","WorkoutCard","RestTimer","duration","startTimer","useState","started","setStarted","remaining","setRemaining","useEffect","timer","setTimeout","clearTimeout","gap","timerBox","Workout","setUserWorkout","setWorkout","exercisesArr","setExercisesArr","setCurrSet","setCurrExercise","setExercise","setTimer","loadInProgress","useRef","useContext","userWorkoutId","useParams","userWorkoutRef","exists","getWorkout","workoutId","docRef","newExercisesArr","concat","updateDoc","getUserWorkout","current","getExercises","Paper","gridStyle","cardPaper","paddingRight","marginTB","cardText","CreationCenter","sm","Link","RouterLink","modalStyle","EditExercise","exerciseName","synergisticMuscle","exerciseTutorial","exerciseSubType","img","openDialog","handleMuscleChange","changeDialogState","handleTypeChange","handleClose","updateExercise","deleteExercise","exerciseType","deleteDoc","paddingTop","ListSubheader","multiline","rows","placeholder","paddingBottom","CreateExercise","createExercise","modalCloser","tableHead","EditExercises","selectedExercises","rowsPerPage","exerciseCreateOpen","handleChangePage","handleChangeRowsPerPage","parseInt","TableContainer","slice","row","TablePagination","rowsPerPageOptions","count","onPageChange","onRowsPerPageChange","overflowY","columns","field","headerName","CreateWorkout","workoutName","workoutLength","workoutSets","workoutReps","intensity","handleIntensityChange","createWorkout","exerciseMap","Slider","defaultValue","getAriaValueText","valuetext","valueLabelDisplay","step","marks","min","max","autoHeight","pageSize","checkboxSelection","onSelectionModelChange","selectedId","smallModalStyle","CreateUserWorkout","switchStartModalState","newDate","LocalizationProvider","dateAdapter","AdapterDateFns","locale","DateTimePicker","renderInput","params","WorkoutSelector","selected","handleClick","updateWorkout","Checkbox","checked","inputProps","scroll","CreateCustomWorkout","startWorkout","lg","EditWorkout","exercisesWithID","handleParentModalState","deleteWorkout","handleChangeDialogStatus","selectionModel","overflow","EditWorkouts","selectorList","Fragment","modalStateChanger","style2","Calendar","userWorkouts","handleOpen","handleWorkoutChange","getUserWorkouts","scheduleWorkoutModal","q2","StaticDatePicker","openTo","Fade","in","TimePicker","float","endIcon","className","gutterBottom","justifyItems","loginOpen","AppTabBar","anchorEl","openAccountMenu","accountAnchorEl","handleModalClose","handleAccountClick","handleAccountClose","currentTarget","elementAnchorEl","AppBar","bottom","Toolbar","appLogoutHandler","flexGrow","App","uuid","userEmail","showLogin","loginElement","createRef","signUpElement","tabMenuElement","splashLoginElement","handleLogIn","logOut","handleSignUp","signInWithEmailAndPassword","errorCode","code","receiveError","createUserWithEmailAndPassword","setDoc","currentUser","path","exact","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.df73a212.chunk.js","sourcesContent":["//this contains the firebase context and provider\r\nimport React, { createContext} from \"react\";\r\n// import firebaseConfig from \"./firebaseConfig\";\r\nimport { initializeApp, getApps } from \"firebase/app\";\r\nimport { getAnalytics } from \"@firebase/analytics\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { doc, getDoc, getFirestore } from \"firebase/firestore\";\r\nimport {\r\n  getDatabase,\r\n  ref\r\n} from \"firebase/database\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyC6rWX23LA2pdSTMAcptLvLDsxRLk4buZg\",\r\n  authDomain: \"cs385-fitness-app.firebaseapp.com\",\r\n  databaseURL: \"https://cs385-fitness-app-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"cs385-fitness-app\",\r\n  storageBucket: \"cs385-fitness-app.appspot.com\",\r\n  messagingSenderId: \"392827482682\",\r\n  appId: \"1:392827482682:web:4c50bcdbbf7e1dabfefb03\",\r\n  measurementId: \"G-NEY42M2JF1\"\r\n};\r\n\r\nconst FirebaseContext = createContext(null);\r\nexport { FirebaseContext };\r\n\r\nexport default ({ children }) => {\r\n  let firebase = {\r\n    app: null,\r\n    auth: null,\r\n    authCredential: null,\r\n    user: null,\r\n    database: null,\r\n    analytics: null,\r\n  };\r\n\r\n  //check if firebase app has been init\r\n  if (!getApps.length) {\r\n    const app = initializeApp(firebaseConfig);\r\n    \r\n    const auth = getAuth();\r\n    const analytics = getAnalytics(app);\r\n    // console.log(auth);\r\n    firebase = {\r\n      app: app,\r\n      auth: auth,\r\n      authCredential: null,\r\n      user: null,\r\n      database: getFirestore(app),\r\n      analytics: analytics,\r\n      api: {\r\n        \r\n      }\r\n    };\r\n  }\r\n  \r\n  return (\r\n    <FirebaseContext.Provider value={firebase}>\r\n      {children}\r\n    </FirebaseContext.Provider>\r\n  );\r\n};","import React from \"react\";\r\nimport Typography from '@mui/material/Typography';\r\nimport Card from '@mui/material/Card';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Button from '@mui/material/Button';\r\nimport Alert from '@mui/material/Alert';\r\nimport Visibility from '@mui/icons-material/Visibility';\r\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\r\nimport {FirebaseContext} from '../../config/firebase';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n// import TextField from '@mui/material/TextField';\r\nimport { EmailAuthProvider, reauthenticateWithCredential, updatePassword } from \"firebase/auth\";\r\n\r\nconst cardStyle = {\r\n  backgroundColor: '#e0e0e0', \r\n  width: 'auto', \r\n  marginTop: 4, \r\n  padding: 4,\r\n  }\r\nconst cardHeader = {display: 'grid', justifyContent: 'center'}\r\nconst passwordStyle = {m: 1, backgroundColor: 'white', minWidth: '46%'}\r\nconst accountButton = {\r\n  marginLeft: 6, \r\n  marginBottom: 8, \r\n  minWidth: '94.5%'\r\n}\r\nconst accountAlert = {\r\n  marginLeft: 6, \r\n  marginBottom: 8, \r\n  maxWidth: '90%'\r\n}\r\n\r\nconst textStyle = {m: 1, backgroundColor: 'white', width: '93.5%'}\r\n\r\nclass AccountManagement extends React.Component {\r\n  static contextType = FirebaseContext;\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      user: this.props.user,\r\n      currentPassword: \"\",\r\n      showCurrentPassword: false,\r\n      newPassword: \"\",\r\n      confirmPassword: \"\",\r\n      showNewPassword: false,\r\n      passwordUpdated: false,\r\n      updateFailure: false,\r\n      failureMessage: \"\",\r\n      openDeleteDialog: false,\r\n      name: this.props.user.name,\r\n      height: this.props.user.height,\r\n      weight: this.props.user.weight,\r\n    }\r\n\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.handleMouseDownShowCurrPassword = this.handleMouseDownShowCurrPassword.bind(this);\r\n    this.handleMouseUpShowCurrPassword = this.handleMouseUpShowCurrPassword.bind(this);\r\n    this.handleMouseDownShowNewPassword = this.handleMouseDownShowNewPassword.bind(this);\r\n    this.handleMouseUpShowNewPassword = this.handleMouseUpShowNewPassword.bind(this);\r\n    this.updatePassword = this.updatePassword.bind(this);\r\n    this.deleteUserDialog = this.deleteUserDialog.bind(this);\r\n    this.handleCloseDeleteDialog = this.handleCloseDeleteDialog.bind(this);\r\n    this.deleteUser = this.deleteUser.bind(this);\r\n  }\r\n\r\n  handleTextBoxChange(e) {\r\n    if (e.target.id === 'current-password')\r\n    {\r\n      this.setState({currentPassword: e.target.value});\r\n    }\r\n    if (e.target.id === 'new-password')\r\n    {\r\n      this.setState({newPassword: e.target.value});\r\n    }\r\n    if (e.target.id === 'confirm-password')\r\n    {\r\n      this.setState({confirmPassword: e.target.value});\r\n    }\r\n    if (e.target.id === 'name')\r\n    {\r\n      this.setState({name: e.target.value});\r\n    }\r\n    if (e.target.id === 'height')\r\n    {\r\n      this.setState({height: e.target.value});\r\n    }\r\n    if (e.target.id === 'weight')\r\n    {\r\n      this.setState({weight: e.target.value});\r\n    }\r\n  }\r\n\r\n  handleMouseDownShowCurrPassword(e)\r\n  {\r\n    e.preventDefault();\r\n    this.setState({showCurrentPassword: true})\r\n  }\r\n\r\n  handleMouseUpShowCurrPassword()\r\n  {\r\n    this.setState({showCurrentPassword: false})\r\n  }\r\n\r\n  handleMouseDownShowNewPassword(e)\r\n  {\r\n    e.preventDefault();\r\n    this.setState({showNewPassword: true})\r\n  }\r\n\r\n  handleMouseUpShowNewPassword()\r\n  {\r\n    this.setState({showNewPassword: false})\r\n  }\r\n\r\n  async updatePassword() {\r\n    if (this.state.newPassword === this.state.confirmPassword && this.state.newPassword.length > 6)\r\n    {\r\n    var user = this.context.user;\r\n    var currentPassword = this.state.currentPassword;\r\n    // console.log(user);\r\n    var credential = EmailAuthProvider.credential(user.email, currentPassword);\r\n    // console.log(credential);\r\n    await reauthenticateWithCredential(user, credential).then((userCredential) =>{\r\n      this.context.authCredential = userCredential;\r\n      this.context.user = userCredential.user;\r\n      updatePassword(user, this.state.newPassword);\r\n      this.setState({currentPassword:\"\", newPassword:\"\", confirmPassword:\"\", passwordUpdated: true})\r\n    }).catch((error) => {\r\n      this.setState({currentPassword:\"\", newPassword:\"\", confirmPassword:\"\", updateFailure: true, failureMessage: \"Current password is incorrect.\"})\r\n    });\r\n    }\r\n    else {\r\n      this.setState({currentPassword:\"\", newPassword:\"\", confirmPassword:\"\", updateFailure: true, failureMessage: \"New passwords do not match, or do not contain at least 6 characters.\"})\r\n    }\r\n  }\r\n\r\n  deleteUserDialog() {\r\n    this.setState({openDeleteDialog: true})\r\n  }\r\n\r\n  handleCloseDeleteDialog() {\r\n    this.setState({openDeleteDialog: false})\r\n  }\r\n\r\n  async deleteUser() {\r\n    this.props.deleteHandler();\r\n    this.setState({openDeleteDialog: false})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{display: 'grid', justifyContent: 'center'}}>\r\n       <Typography variant=\"h5\" sx={cardHeader}>\r\n         Account Management\r\n        </Typography>\r\n        <Card style={cardStyle}>\r\n          <Typography variant=\"h6\" sx={cardHeader}>\r\n            Change Your Password\r\n          </Typography>\r\n          <div style={{width:'auto'}}>\r\n          <FormControl sx={passwordStyle} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">Current Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"current-password\"\r\n            type={this.state.showCurrentPassword ? 'text' : 'password'}\r\n            value={this.state.currentPassword}\r\n            onChange={this.handleTextBoxChange}\r\n            endAdornment={\r\n              <InputAdornment id=\"show-current\" position=\"end\">\r\n                <IconButton\r\n                  id=\"show-current\"\r\n                  aria-label=\"toggle password visibility\"\r\n                  onMouseUp={this.handleMouseUpShowCurrPassword}\r\n                  onMouseDown={this.handleMouseDownShowCurrPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showCurrentPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"Current Password\"\r\n          />\r\n        \r\n        </FormControl>\r\n        </div>\r\n        <FormControl sx={passwordStyle} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">New Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"new-password\"\r\n            type={this.state.showNewPassword ? 'text' : 'password'}\r\n            value={this.state.newPassword}\r\n            onChange={this.handleTextBoxChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onMouseUp={this.handleMouseUpShowNewPassword}\r\n                  onMouseDown={this.handleMouseDownShowNewPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showNewPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"New Password\"\r\n          />\r\n        \r\n        </FormControl>\r\n        <FormControl sx={passwordStyle} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">Confirm New Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"confirm-password\"\r\n            type={this.state.showNewPassword ? 'text' : 'password'}\r\n            value={this.state.confirmPassword}\r\n            onChange={this.handleTextBoxChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onMouseUp={this.handleMouseUpShowNewPassword}\r\n                  onMouseDown={this.handleMouseDownShowNewPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showNewPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"Confirm New Password\"\r\n          />\r\n        \r\n        </FormControl>\r\n        { (this.state.passwordUpdated) &&\r\n        <Alert onClose={() => {this.setState({passwordUpdated: false})}} style={accountAlert}>Password Successfully Updated</Alert>\r\n        }\r\n        {\r\n          (this.state.updateFailure) &&\r\n          <Alert onClose={() => {this.setState({updateFailure: false})}} style={accountAlert} severity=\"error\">{this.state.failureMessage}</Alert>\r\n        }\r\n        <Button variant=\"contained\" onClick={this.updatePassword} style={accountButton}>Update Password</Button>\r\n        </Card>\r\n        <Card style={cardStyle} >\r\n        <Typography variant=\"h6\" sx={cardHeader}>\r\n            Change Your Details\r\n        </Typography>\r\n        <FormControl sx={textStyle} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Your Name</InputLabel>\r\n          <OutlinedInput\r\n            id=\"name\"\r\n            type=\"text\"\r\n            value={this.state.name}\r\n            onChange={this.handleTextBoxChange}\r\n            label=\"Your Name\"\r\n            \r\n          />\r\n        </FormControl>\r\n        <FormControl sx={textStyle} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-height\">Your Height (cm)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"height\"\r\n            type=\"number\"\r\n            value={this.state.height}\r\n            onChange={this.handleTextBoxChange}\r\n            label=\"Your Height (cm)\"\r\n            \r\n          />\r\n        </FormControl>\r\n        <FormControl sx={textStyle} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-weight\">Your Weight (kg)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"weight\"\r\n            type=\"number\"\r\n            value={this.state.weight}\r\n            onChange={this.handleTextBoxChange}\r\n            label=\"Your Weight (cm)\"\r\n            \r\n          />\r\n        </FormControl>\r\n        <Button variant=\"contained\" style={accountButton} onClick={() => this.props.updateUserDetails(this.state.name, this.state.weight, this.state.height)}>Update Details</Button>\r\n        </Card>\r\n        <Card style={cardStyle} sx={{marginBottom: '60px'}}>\r\n        <Typography variant=\"h6\" sx={cardHeader}>\r\n            Delete Your Account\r\n        </Typography>\r\n        <Typography sx={cardHeader} >\r\n          DANGER: this cannot be undone\r\n        </Typography>\r\n        <Button onClick={this.deleteUserDialog} variant=\"contained\" color=\"error\" style={accountButton} sx={{marginTop:1}} >Delete Account</Button>\r\n        </Card>\r\n        <Dialog\r\n        open={this.state.openDeleteDialog}\r\n        onClose={this.handleCloseDeleteDialog}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n        >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Delete your user account?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            You are deleting your account. Your data will be removed from our records, and cannot be retrieved.\r\n          </DialogContentText>\r\n          <FormControl sx={passwordStyle} style={{width:'90%'}} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">Current Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"current-password\"\r\n            type={this.state.showCurrentPassword ? 'text' : 'password'}\r\n            value={this.state.currentPassword}\r\n            onChange={this.handleTextBoxChange}\r\n            endAdornment={\r\n              <InputAdornment id=\"show-current\" position=\"end\">\r\n                <IconButton\r\n                  id=\"show-current\"\r\n                  aria-label=\"toggle password visibility\"\r\n                  onMouseUp={this.handleMouseUpShowCurrPassword}\r\n                  onMouseDown={this.handleMouseDownShowCurrPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showCurrentPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"Current Password\"\r\n          />\r\n        \r\n        </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleCloseDeleteDialog}>Disagree</Button>\r\n          <Button onClick={this.deleteUser} autoFocus>\r\n            Agree\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AccountManagement;","import React from \"react\";\r\n\r\n//region Material UI Imports\r\nimport Box from '@mui/material/Box';\r\nimport Modal from '@mui/material/Modal';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Visibility from '@mui/icons-material/Visibility';\r\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\r\nimport Alert from '@mui/material/Alert';\r\nimport Link from '@mui/material/Link';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\n// import Link from '@mui/material/Link';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\n//endregion;\r\nimport {FirebaseContext} from '../../config/firebase';\r\n\r\n\r\nconst boxStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  display:'grid', \r\n  justifyContent:'center',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 270,\r\n  maxWidth: '80vw',\r\n  bgcolor: 'background.paper',\r\n  // border: '1px solid #000',\r\n  boxShadow: 24,\r\n  p: 2,\r\n};\r\n\r\n\r\n\r\nconst inputStyle = { m: 1, width: '25ch' }\r\n\r\nconst stopPropagationForTab = (event) => {\r\n  if (event.key === \"Tab\") {\r\n    event.stopPropagation();\r\n  }\r\n};\r\n\r\n//This login class has styleing based on https://mui.com/components/text-fields/\r\nclass Login extends React.Component{\r\n  \r\n  constructor(props)\r\n  {\r\n    super(props)\r\n    this.state = {\r\n      open: this.props.open,\r\n      email: \"\",\r\n      password: \"\",\r\n      showPassword: false,\r\n      loggingIn: this.props.loggingIn,\r\n      errorMessage: \"\"\r\n    }\r\n\r\n    \r\n\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n    this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\r\n    this.handleMouseDownShowPassword = this.handleMouseDownShowPassword.bind(this);\r\n    this.handleEmailChange = this.handleEmailChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleModalStateChange = this.handleModalStateChange.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n  }\r\n  openModal() {\r\n    // this.props.closeMenu();\r\n    this.setState({open: true});\r\n    \r\n  }\r\n  handleModalStateChange() {\r\n    \r\n    this.setState({open: !this.state.open})\r\n    if (!this.props.buttonFlag)\r\n    {\r\n      this.props.closeMenu();\r\n    }\r\n    \r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    this.setState({password: e.target.value})\r\n  }\r\n\r\n  handleEmailChange(e) {\r\n    this.setState({email: e.target.value})\r\n  }\r\n\r\n  handleClickShowPassword() {\r\n    this.setState({showPassword: !this.state.showPassword})\r\n  }\r\n\r\n  handleMouseDownShowPassword(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  handleSubmit() {\r\n    // console.log(this.context);\r\n    this.setState({loggingIn: !this.state.loggingIn});\r\n    \r\n    // this.props.updateUser(this.context.user);\r\n  }\r\n\r\n  \r\n  receiveError(errorFromApp) {\r\n    let errorDesc = \"\";\r\n    switch (errorFromApp)\r\n    {\r\n      case 'auth/user-not-found':\r\n      case 'auth/wrong-password':\r\n        errorDesc = \"Incorrect Email / Password\";\r\n        break;\r\n      case 'auth/timeout':\r\n        errorDesc = \"Connection timed out, please try again\"\r\n        break;\r\n      default:\r\n        errorDesc = \"Sorry, log in failed, please try again.\";\r\n        break;\r\n    }\r\n    \r\n    this.setState({errorMessage: errorDesc})\r\n  }\r\n\r\n  static contextType = FirebaseContext;\r\n  render() {\r\n    const loginHandler = this.props.appLoginHandler;\r\n    // const signUpHandler = this.props.appSignUpHandler;\r\n    return (\r\n      <div style={{display:'grid', justifyContent:'center'}}>\r\n        {(this.props.buttonFlag) ? \r\n        <Button \r\n        variant=\"contained\" \r\n        fullWidth\r\n        color=\"success\" \r\n        sx={{margin: 1, width: '7em'}} \r\n        onClick={() => {this.openModal(); }}> \r\n        Log In\r\n        </Button>\r\n      : \r\n      <MenuItem onClick={() => {this.openModal(); }}>Log In</MenuItem>\r\n        }\r\n        \r\n      \r\n      <Modal \r\n      open={this.state.open}\r\n      onClose={this.handleModalStateChange}\r\n      onKeyDown={stopPropagationForTab}>\r\n       <Box sx={boxStyle} >\r\n        <Typography variant=\"h4\" sx={{marginLeft: \"auto\", marginRight: \"auto\"}}>\r\n          Login\r\n        </Typography>\r\n        {(this.state.loggingIn) ? \r\n        <div style={{ display:'grid', justifyContent:'center', marginTop: '1em'}}>\r\n          <div>\r\n          <Typography>\r\n            Attempting to log in...\r\n          </Typography>\r\n          </div>\r\n          <div style={{ display:'grid', justifyContent:'center', marginTop: '1em'}}>\r\n          <CircularProgress />\r\n          </div>\r\n        </div> :\r\n        <div style={{ display:'grid', justifyContent:'center'}}>\r\n        <FormControl sx={inputStyle} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Email</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-email\"\r\n            type=\"text\"\r\n            value={this.state.email}\r\n            onChange={this.handleEmailChange}\r\n            label=\"Email\"\r\n          />\r\n        </FormControl>\r\n        <FormControl sx={inputStyle} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-adornment-password\"\r\n            type={this.state.showPassword ? 'text' : 'password'}\r\n            value={this.state.password}\r\n            onChange={this.handlePasswordChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={this.handleClickShowPassword}\r\n                  onMouseDown={this.handleMouseDownShowPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"Password\"\r\n          />\r\n        </FormControl>\r\n        {(this.state.errorMessage) && \r\n        <Alert severity=\"error\" sx={{margin: 1, marginTop: 0, width: '21ch' }} onClose={() => {this.setState({errorMessage: \"\"})}}>\r\n          {this.state.errorMessage}\r\n        </Alert>\r\n        }\r\n        <Button variant=\"contained\" \r\n        sx={{marginLeft: 1, marginRight: 1}}\r\n        onClick={async () => {loginHandler(this.state.email,this.state.password); this.handleSubmit()}}\r\n        >\r\n          Log In\r\n        </Button>\r\n          {/* <Link href=\"#\" sx={{marginLeft: \"auto\", marginRight: \"auto\", marginTop: 1}} >Forgotten Password</Link> */}\r\n          {/* <Link href=\"#\" sx={{marginLeft: \"auto\", marginRight: \"auto\", marginTop: 1}} onClick={signUpHandler}>Don't have an account? Sign up</Link> */}\r\n        </div>\r\n        }\r\n      </Box>\r\n       \r\n      </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login;","import React from \"react\";\r\n// import Logout from \"./users/Logout\";\r\n\r\n// import AppTabBar from \"./standard-page-parts/AppTabBar\";\r\n// import {\r\n//   BrowserRouter as Router,\r\n//   Switch,\r\n//   Route,\r\n//   Link,\r\n//   useRouteMatch,\r\n//   useParams\r\n// } from \"react-router-dom\";\r\n\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport CardMedia from \"@mui/material/CardMedia\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport {FirebaseContext} from \"../config/firebase\";\r\nimport { collection, query, doc, getDoc, where, onSnapshot  } from \"firebase/firestore\";\r\nimport Login from \"./users/Login\";\r\n\r\n//This home page exists only to test that the user is being logged in correctly and user is available in props for use elsewhere in application.\r\nimport {\r\n  // BrowserRouter as Router,\r\n  // Switch,\r\n  // Route,\r\n  Link as RouterLink\r\n  // useRouteMatch,\r\n  // useParams\r\n} from \"react-router-dom\";\r\n\r\nconst homeButton = {\r\n  width: \"100%\",\r\n  textDecoration: \"none\"\r\n};\r\n\r\nclass Home extends React.Component {\r\n  static contextType = FirebaseContext;\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    let date = new Date();\r\n    let dateString = \"\";\r\n    dateString = date.getFullYear() + \" \" +  (date.getMonth()+1) + \" \" + date.getDate();\r\n    this.state = {\r\n      user: this.props.user,\r\n      workouts: [],\r\n      date: date,\r\n      dateString: dateString,\r\n      fetchComplete: false\r\n    };\r\n    \r\n    // console.log(this.props.user)\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const userRef = await doc(this.context.database, \"users\", this.context.user.uid)\r\n    // console.log(this.state.dateString);\r\n    const q = query(collection(this.context.database, \"user-workouts\"), where(\"user\", \"==\", userRef), where(\"dateString\", \"==\", this.state.dateString), where(\"completed\", \"==\", false));\r\n    const unsubscribe = await onSnapshot(q, (querySnapshot) => {\r\n      const workouts = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          \r\n          \r\n         workouts.push(data);\r\n      });\r\n\r\n      \r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // {\r\n        this.setState({workouts: workouts})\r\n      // }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  async componentDidUpdate() {\r\n    if (this.state.workouts[0] && !this.state.workouts[0].name)\r\n    {\r\n    const docSnap = await getDoc(this.state.workouts[0].workout);\r\n    // console.log(docSnap.data())\r\n    let newWorkouts = []\r\n    newWorkouts.push(this.state.workouts[0]);\r\n    newWorkouts[0].name = docSnap.data().name\r\n    // console.log(newWorkouts[0])\r\n    this.setState({workouts: newWorkouts, fetchCompleted: true })\r\n    \r\n    // this.state.workouts[0].push(docSnap)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ display: \"grid\", justifyContent: \"center\", marginBottom: 64 }}>\r\n          <Card\r\n            sx={{\r\n              width: 320,\r\n              maxWidth: \"90vw\",\r\n              padding: 1,\r\n              margin: 1,\r\n              display: \"grid\",\r\n              justifyContent: \"center\"\r\n            }}\r\n          >\r\n            <CardMedia\r\n              component=\"img\"\r\n              height=\"180\"\r\n              style={{width: '95%' , marginLeft: 7, marginBottom: 8}}\r\n              src=\"/imgs/tmw_logo.JPG\"\r\n              // {tmw_logo}\r\n            />\r\n            \r\n            {(this.state.workouts[0]) &&\r\n            \r\n            \r\n            <Card style={{width: '95%', marginLeft: 7, backgroundColor: '#629365', color: 'white'}} >\r\n            <Grid container >\r\n              <Grid item xs={12} style={{display: 'flex', justifyContent: 'center'}}>\r\n            <Typography\r\n              sx={{ fontSize: '2em', color: 'white' }}\r\n              color=\"text.secondary\"\r\n            >\r\n              Today's Workout:\r\n            </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} style={{display: 'flex', justifyContent: 'center'}}>\r\n            <Typography sx={{ fontSize: '1.5em', mb: 1, color: 'white' }} color=\"text.secondary\">\r\n              {this.state.workouts[0].name}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} style={{display: 'flex', justifyContent: 'center'}}>\r\n            <RouterLink to={`workout/${this.state.workouts[0].id}`} style={{textDecoration: 'none', display: 'flex', justifyContent: 'center'}}>\r\n              <Button variant=\"contained\" color=\"success\" size=\"medium\" style={{textDecoration: 'none', marginBottom: 8}}>\r\n                Start Now\r\n              </Button>\r\n            </RouterLink>\r\n              </Grid>\r\n            </Grid>\r\n          </Card>\r\n            }\r\n            <CardActions>\r\n            <RouterLink to=\"/create-custom-workout\" style={homeButton}>\r\n              <Button\r\n                orientation=\"vertical\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n              >\r\n                Start a Workout\r\n              </Button>\r\n              </RouterLink >\r\n            </CardActions>\r\n            <CardActions>\r\n            <RouterLink to=\"/my-calendar\" style={homeButton}>\r\n              <Button\r\n                orientation=\"vertical\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n              >\r\n                My Calendar\r\n              </Button>\r\n            </RouterLink>\r\n            </CardActions>\r\n            <CardActions>\r\n              <RouterLink to=\"/browse-workouts\" style={homeButton}>\r\n                <Button\r\n                  orientation=\"vertical\"\r\n                  variant=\"contained\"\r\n                  size=\"large\"\r\n                  fullWidth\r\n                >\r\n                  Browse Workouts\r\n                </Button>\r\n              </RouterLink>\r\n            </CardActions>\r\n            <CardActions>\r\n            <RouterLink to=\"/creation-center\" style={homeButton}>\r\n              <Button\r\n                orientation=\"vertical\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n              >\r\n                Creation Center\r\n              </Button>\r\n            </RouterLink>\r\n            </CardActions>\r\n            <CardActions>\r\n            <RouterLink to=\"/my-workouts\" style={homeButton}>\r\n              <Button\r\n                orientation=\"vertical\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n              >\r\n                My Workouts\r\n              </Button>\r\n            </RouterLink>\r\n            </CardActions>\r\n          </Card>\r\n         \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React from \"react\"\r\n\r\nimport { withStyles } from '@mui/styles';\r\nimport Box from '@mui/material/Box';\r\nimport Modal from '@mui/material/Modal';\r\nimport Button from '@mui/material/Button';\r\nimport Typography from '@mui/material/Typography';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport InputAdornment from '@mui/material/InputAdornment';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Visibility from '@mui/icons-material/Visibility';\r\nimport VisibilityOff from '@mui/icons-material/VisibilityOff';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport MuiAccordion from '@mui/material/Accordion';\r\nimport AccordionSummary from '@mui/material/AccordionSummary';\r\nimport AccordionDetails from '@mui/material/AccordionDetails';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport Alert from '@mui/material/Alert';\r\nimport Link from '@mui/material/Link';\r\nimport Tooltip from '@mui/material/Tooltip';\r\n\r\nconst Accordion = withStyles({\r\n  root: {\r\n    \"&$expanded\": {\r\n      marginLeft: 8,\r\n      marginRight: 8\r\n    }\r\n  },\r\n  expanded: {}\r\n})(MuiAccordion);\r\n\r\nconst modalBox = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  display:'grid', \r\n  justifyContent:'center',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 320,\r\n  bgcolor: 'background.paper',\r\n  // border: '1px solid #000',\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nconst stopPropagationForTab = (event) => {\r\n  if (event.key === \"Tab\") {\r\n    event.stopPropagation();\r\n  }\r\n};\r\n\r\n\r\nclass SignUp extends React.Component {\r\n  constructor(props)\r\n  {\r\n    super(props)\r\n    this.state = {\r\n      name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      height: \"\",\r\n      weight: \"\",\r\n      showPassword: false,\r\n      signingUp: false,\r\n      tooltip: [],\r\n      canSubmit: true,\r\n      errorMessage: '',\r\n      open: this.props.open\r\n    }\r\n\r\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n    this.handleClickShowPassword = this.handleClickShowPassword.bind(this);\r\n    this.handleMouseDownShowPassword = this.handleMouseDownShowPassword.bind(this);\r\n    this.handleEmailChange = this.handleEmailChange.bind(this);\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.handleHeightChange = this.handleHeightChange.bind(this);\r\n    this.handleWeightChange = this.handleWeightChange.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n    this.handleModalStateChange = this.handleModalStateChange.bind(this);\r\n    this.handleSignUpProcessing = this.handleSignUpProcessing.bind(this);\r\n    this.checkIfValid = this.checkIfValid.bind(this);\r\n    // this.handleSubmit = this.handleSubmit.bind(this);\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.checkIfValid()\r\n\r\n  }\r\n\r\n  checkIfValid() {\r\n    let invalid = false;\r\n    let tooltip = [];\r\n    const emailRegex = new RegExp(/^\\w+([.-]*\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/)\r\n    if (this.state.name.length === 0)\r\n      {\r\n        invalid = true;\r\n        tooltip.push(\"Please enter a name\");\r\n      }\r\n    if (!emailRegex.test(this.state.email))\r\n      {\r\n        invalid = true;\r\n        tooltip.push(\"Please enter a valid email address\");\r\n      }\r\n    if (this.state.password.length < 6)\r\n      {\r\n        invalid = true;\r\n        tooltip.push(\"Please enter a password with more than 6 characters\");\r\n      }\r\n    if (invalid === false)\r\n    {\r\n      tooltip = [\"You may now submit for signing up\"]\r\n    }\r\n      this.setState({canSubmit: invalid, tooltip: tooltip})\r\n      \r\n\r\n    \r\n  }\r\n\r\n  receiveError(errorFromApp) {\r\n    this.setState({errorMessage: errorFromApp})\r\n  }\r\n\r\n  handleSignUpProcessing() {\r\n    this.setState({signingUp: !this.state.signingUp})\r\n  }\r\n\r\n  openModal() {\r\n    this.setState({open: true})\r\n  }\r\n\r\n  handleModalStateChange() {\r\n    this.setState({open: !this.state.open})\r\n    if (!this.props.splash)\r\n    {\r\n      this.props.closeMenu();\r\n    }\r\n    \r\n  }\r\n\r\n  handlePasswordChange(e) {\r\n    this.setState({password: e.target.value}, () => this.checkIfValid())\r\n  }\r\n\r\n  handleEmailChange(e) {\r\n    this.setState({email: e.target.value}, () => this.checkIfValid())\r\n  }\r\n\r\n  handleNameChange(e) {\r\n    this.setState({name: e.target.value}, () => this.checkIfValid())\r\n  }\r\n\r\n  handleHeightChange(e) {\r\n    this.setState({height: e.target.value})\r\n  }\r\n\r\n  handleWeightChange(e) {\r\n    this.setState({weight: e.target.value})\r\n  }\r\n\r\n  handleClickShowPassword() {\r\n    this.setState({showPassword: !this.state.showPassword})\r\n  }\r\n\r\n  handleMouseDownShowPassword(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    const signUpHandler = this.props.appSignUpHandler;\r\n    const signUpSubmit = this.props.signUpSubmit;\r\n    return (\r\n      <div style={{ display:'flex', justifyContent:'center' }}>\r\n        <Button color=\"success\" variant=\"contained\" sx={{margin: 1, width: '7em'}} onClick={this.openModal}>\r\n        Sign Up\r\n        </Button>\r\n        <Modal \r\n        open={this.state.open}\r\n        onClose={this.handleModalStateChange}\r\n        onKeyDown={stopPropagationForTab}>\r\n        <Box sx={modalBox} >\r\n        <Typography variant=\"h4\" sx={{marginLeft: \"auto\", marginRight: \"auto\"}}>\r\n          Sign Up\r\n        </Typography>\r\n        {(this.state.signingUp) ? \r\n          <div>\r\n          <div>\r\n          <Typography>\r\n            Sign up processing...\r\n          </Typography>\r\n          </div>\r\n          <div style={{ display:'grid', justifyContent:'center', marginTop: '1em'}}>\r\n          <CircularProgress />\r\n          </div>\r\n          </div> :\r\n\r\n      \r\n        <div style={{ display:'grid', justifyContent:'center' }}>\r\n        <FormControl sx={{ m: 1, width: 'auto' }} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Your Name (will default to email)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-name\"\r\n            type=\"text\"\r\n            value={this.state.name}\r\n            onChange={this.handleNameChange}\r\n            label=\"Your Name (will default to email)\"\r\n            \r\n          />\r\n        </FormControl>\r\n        <FormControl sx={{ m: 1, width: 'auto' }} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-email\">Email</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-email\"\r\n            type=\"text\"\r\n            value={this.state.email}\r\n            onChange={this.handleEmailChange}\r\n            label=\"Email\"\r\n          />\r\n        </FormControl>\r\n        <FormControl sx={{ m: 1, width: 'auto' }} variant=\"outlined\" required>\r\n          <InputLabel htmlFor=\"outlined-adornment-password\">Password</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-adornment-password\"\r\n            type={this.state.showPassword ? 'text' : 'password'}\r\n            value={this.state.password}\r\n            onChange={this.handlePasswordChange}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={this.handleClickShowPassword}\r\n                  onMouseDown={this.handleMouseDownShowPassword}\r\n                  edge=\"end\"\r\n                >\r\n                  {this.state.showPassword ? <VisibilityOff /> : <Visibility />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n            label=\"Password\"\r\n          />\r\n        \r\n        </FormControl>\r\n        <Accordion  sx={{ m: 1, width: 'auto' , \"&&expanded\" : {\r\n          margin: 1,\r\n          \r\n        }}}>\r\n            <AccordionSummary>\r\n              <Typography>\r\n                Personal Details (Optional)\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <Typography sx={{marginTop: -1, marginBottom:1, fontSize: 14 }} color=\"text.secondary\">\r\n                This info will help us provide reports on your strength.\r\n              </Typography>\r\n              <FormControl sx={{marginBottom:1,  width: 'auto' }} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Height (cm)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-email\"\r\n            type=\"number\"\r\n            value={this.state.height}\r\n            onChange={this.handleHeightChange}\r\n            label=\"Height (cm)\"\r\n          />\r\n        </FormControl>\r\n        <FormControl sx={{ width: 'auto' }} variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Weight (kg)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-email\"\r\n            type=\"number\"\r\n            value={this.state.weight}\r\n            onChange={this.handleWeightChange}\r\n            label=\"Weight (kg)\"\r\n          />\r\n        </FormControl>\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          {(this.state.errorMessage) && \r\n        <Alert severity=\"error\" sx={{margin: 1, marginTop: 0, width: 'auto' }} onClose={() => {this.setState({errorMessage: \"\"})}}>\r\n          {this.state.errorMessage}\r\n        </Alert>\r\n        }\r\n        \r\n        \r\n        \r\n        <Tooltip title={this.state.tooltip.map(x => \r\n          <p id={x}>{x}</p>\r\n        )}>\r\n        <span style={{width:'100%'}}>\r\n        <Button sx={{margin: 1, width: '95%'}} variant=\"contained\" \r\n          disabled={this.state.canSubmit}\r\n        onClick={async () => {signUpSubmit(this.state.name, \r\n          this.state.email,\r\n          this.state.password,\r\n          this.state.weight,\r\n          this.state.height); this.handleSignUpProcessing()}\r\n        }\r\n        >\r\n          Create Account\r\n        </Button>\r\n        </span>\r\n        </Tooltip>\r\n        </div>}\r\n        {/* <Button sx={{margin: 1}} variant=\"contained\" onClick={signUpHandler}>Back to Log In</Button> */}\r\n       </Box>\r\n      </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SignUp;","import React from \"react\";\r\nimport { Link as RouterLink} from \"react-router-dom\";\r\nimport Link from '@mui/material/Link';\r\n\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport CardMedia from \"@mui/material/CardMedia\";\r\nimport Grid from \"@mui/material/Grid\";\r\n\r\nimport Login from \"./users/Login\";\r\nimport SignUp from \"./users/Signup\";\r\n\r\nclass Splash extends React.Component {\r\n  render() {\r\n    return(\r\n      <div style={{display: 'flex', justifyContent: 'center'}}>\r\n       <Card\r\n       sx={{\r\n        width: 320,\r\n        maxWidth: \"90vw\",\r\n        padding: 1,\r\n        // margin: 1,\r\n        display: \"grid\",\r\n        justifyContent: \"center\"\r\n      }}>\r\n        <CardMedia\r\n              component=\"img\"\r\n              height=\"200\"\r\n              style={{width: '95%' , marginLeft: 7, marginBottom: 8}}\r\n              src=\"/imgs/tmw_logo.JPG\"\r\n              // {tmw_logo}\r\n            />\r\n        <Typography sx={{m: 1, display: 'flex', justifyContent: 'center'}}>\r\n          Create and plan your workouts\r\n        </Typography>\r\n        <Typography sx={{m: 1, display: 'flex', justifyContent: 'center'}}>\r\n          Log in or sign up to get started\r\n        </Typography>\r\n        <Login  \r\n          closeMenu={null} buttonFlag={true} \r\n          ref={this.props.loginRef} \r\n          appLoginHandler={this.props.appLoginHandler}\r\n          />\r\n        <SignUp \r\n          splash={true} \r\n          appSignUpHandler={this.props.showSignUp}\r\n          signUpSubmit={this.props.signUpSubmit}\r\n          ref={this.props.signUpRef}\r\n          signUpOpen={this.props.signUp}/>\r\n       </Card>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Splash;","import React from \"react\";\r\n\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Accordion from \"@mui/material/Accordion\";\r\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\r\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Select from \"@mui/material/Select\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {FirebaseContext} from \"../config/firebase\";\r\nimport { collection, getDoc, doc, query, addDoc, onSnapshot  } from \"firebase/firestore\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst inputStyle = {\r\n  backgroundColor: \"white\",\r\n  marginBottom: \".5em\",\r\n  width: \"50vw\"\r\n};\r\n\r\nclass MyAccordion extends React.Component {\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    let date = new Date();\r\n    let dateString = \"\";\r\n    dateString = date.getFullYear() + \" \" +  (date.getMonth()+1) + \" \" + date.getDate();\r\n    this.state = {\r\n      date: date,\r\n      dateString: dateString,\r\n      user: this.props.user,\r\n      exercises: this.props.workout.exercises,\r\n      redirect: false,\r\n      userWorkout: \"\"\r\n    };\r\n    this.scheduleWorkout = this.scheduleWorkout.bind(this);\r\n  }\r\n  \r\n  async componentDidMount() {\r\n    // this.setState({creator: this.context.user.uid})\r\n    // const q = query(collection(this.context.database, \"exercises\"));\r\n    // const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n    //   const exercises = [];\r\n    //   querySnapshot.forEach((doc) => {\r\n    //       let data = doc.data();\r\n    //       data.id = doc.id;\r\n    //       // console.log(doc.id);\r\n    //       exercises.push(data);\r\n    //   });\r\n    //   console.log(exercises)\r\n    //   // console.log(\"Exercises: \", exercises.join(\", \"));\r\n    //     this.setState({exercises: exercises})\r\n      \r\n    // });\r\n    let newExercises = []\r\n    for (let i = 0; i < this.state.exercises.length; i++)\r\n    {\r\n      let exerciseSnap = await getDoc(this.state.exercises[i].exerciseId)\r\n      let exercise = exerciseSnap.data()\r\n      exercise.sets = this.state.exercises[i].sets\r\n      exercise.exerciseId = this.state.exercises[i].exerciseId\r\n      newExercises.push(exercise)\r\n    }\r\n\r\n    this.setState({exercises: newExercises}\r\n      // , () => console.log(this.state.exercises)\r\n      )\r\n  }\r\n\r\n  async scheduleWorkout() {\r\n    const exercises = this.props.workout.exercises\r\n    const workoutRef = doc(this.context.database, \"workouts\", this.props.workout.id);\r\n    const userRef = doc(this.context.database, \"users\", this.context.user.uid)\r\n    \r\n    exercises.forEach(exercise => {\r\n      const sets = [];\r\n      for (let i = 0; i < this.props.workout.sets; i++)\r\n      {\r\n        let set = {}\r\n        set.reps = exercise.reps\r\n        set.weight = 0\r\n        sets.push(set)\r\n      }\r\n      exercise.sets = sets;\r\n    })\r\n\r\n    // console.log(workoutRef)\r\n    // console.log(userRef)\r\n    // console.log(exercises)\r\n\r\n    const userWorkout = await addDoc(collection(this.context.database, \"user-workouts\"), {\r\n      completed: false,\r\n      date: this.state.date,\r\n      dateString: this.state.dateString,\r\n      exercises: exercises,\r\n      user: userRef,\r\n      workout: workoutRef\r\n    });\r\n    \r\n    console.log(\"User Workout added to database: \" + userWorkout.id)\r\n    this.setState({redirect: true, userWorkout: userWorkout.id})\r\n  }\r\n\r\n\r\n  \r\n  render() {\r\n    return (\r\n      <Accordion id={this.props.workout.id}>\r\n          {(this.state.redirect) && <Redirect push to={`workout/${this.state.userWorkout}`} />}\r\n            <AccordionSummary\r\n              aria-controls=\"panel2a-content\"\r\n              id=\"panel2a-header\"\r\n              fullWidth\r\n              sx={{\r\n                '&:hover': {\r\n                bgcolor: 'primary.dark', // use summary hover background\r\n                color: 'primary.light', // use summary hover color\r\n                }\r\n                }}\r\n\r\n            >\r\n              <Typography sx={{ fontSize: 14, width: \"50%\", flexShrink: 0 }}>\r\n              {this.props.workout.name} \r\n              </Typography>\r\n              <Typography\r\n                sx={{\r\n                  fontSize: 14,\r\n                  color: \"text.secondary\",\r\n                  width: \"30%\",\r\n                  flexShrink: 0\r\n                }}\r\n              >\r\n                {this.props.workout.targetMuscleGroup}\r\n\r\n              </Typography>\r\n              <Typography\r\n                sx={{\r\n                  fontSize: 14,\r\n                  color: \"text.secondary\",\r\n                  width: \"33%\",\r\n                  flexShrink: 0\r\n                }}\r\n              >\r\n               {this.props.workout.length} Mins\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n            \r\n            <Button size=\"small\" variant=\"contained\" style={{margin: 2}} onClick={this.scheduleWorkout}>\r\n              Start this workout\r\n            </Button>\r\n              <Typography sx={{ fontSize: 15 }}>\r\n                Sets: {this.props.workout.sets} Reps: {this.props.workout.exercises[0].reps}\r\n              </Typography>\r\n              <Divider />\r\n              <Table size=\"small\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Exercises:</TableCell>\r\n                    <TableCell>Target Muscle:</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {this.state.exercises.map((s, index) => (\r\n                    <TableRow key={s.id}>\r\n                      <TableCell>{s.name}</TableCell>\r\n                      <TableCell>{s.dominantMuscle}</TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n\r\n            </AccordionDetails>\r\n          </Accordion>\r\n    );\r\n    \r\n  }\r\n}\r\n\r\nexport default MyAccordion;\r\n","import React from \"react\";\r\n\r\nimport Card from \"@mui/material/Card\";\r\nimport CardActions from \"@mui/material/CardActions\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Accordion from \"@mui/material/Accordion\";\r\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\r\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Select from \"@mui/material/Select\";\r\nimport Grid from '@mui/material/Grid';\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Modal from '@mui/material/Modal';\r\nimport Box from '@mui/material/Box';\r\nimport Paper from '@mui/material/Paper';\r\nimport {FirebaseContext} from \"../config/firebase\";\r\nimport { collection, query, onSnapshot  } from \"firebase/firestore\";\r\n\r\n\r\nimport MyAccordion from \"./accordion\"\r\n\r\nconst inputStyle = {\r\n  backgroundColor: \"white\",\r\n  marginBottom: \".5em\",\r\n  width: \"40vw\"\r\n};\r\n\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  marginTop: 8,\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  bgcolor: 'background.paper',\r\n  // border: '2px solid #000',\r\n  boxShadow: 24,\r\n  padding: 4,\r\n  overflow: 'scroll',\r\n  // overflowY: 'auto'\r\n}\r\n\r\nclass Workouts extends React.Component {\r\n  static contextType = FirebaseContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      user: this.props.user,\r\n      search: \"\",\r\n      muscleGroup: \"\",\r\n      workouts: [],\r\n      startWorkoutOpen: false\r\n    };\r\n    this.handleSearchBoxChange = this.handleSearchBoxChange.bind(this)\r\n    this.handleMuscleGroupChange = this.handleMuscleGroupChange.bind(this)\r\n    this.switchModalState = this.switchModalState.bind(this);\r\n    // console.log(this.props.user)\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"workouts\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const workouts = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          \r\n          workouts.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // {\r\n        console.log(workouts)\r\n        this.setState({workouts: workouts})\r\n      // }\r\n    });\r\n    \r\n  }\r\n  handleMuscleGroupChange(e) {\r\n    this.setState({muscleGroup: e.target.value})\r\n  }\r\n\r\n  \r\n  handleSearchBoxChange(e) {\r\n    if (e.target.id === \"search\")\r\n    {\r\n      this.setState({search: e.target.value})\r\n    }\r\n  }\r\n\r\n  filterByMuscleGroup(muscleGroup) {\r\n    return function (workout) {\r\n      if (muscleGroup !== \"\")\r\n      {\r\n        return workout.targetMuscleGroup === muscleGroup\r\n      }\r\n      else\r\n      {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  \r\n\r\n\r\n  filterBySearch(search)\r\n  {\r\n    return function (workout) {\r\n      if (search !== \"\")\r\n      {\r\n        return (\r\n          workout.name.toLowerCase().includes(search.toLowerCase()) ||\r\n          workout.targetMuscleGroup.toLowerCase().includes(search.toLowerCase())\r\n          \r\n        )\r\n      }\r\n      else return true;\r\n    }\r\n  }\r\n\r\n  handleChangePage(event, newPage) {\r\n    this.setState({page: newPage})\r\n  }\r\n\r\n\r\n  switchModalState() {\r\n    this.setState({workoutCreateOpen: !this.state.workoutCreateOpen})\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div style={{ display: \"grid\", justifyContent: \"center\", marginBottom: 66, width: \"100%\" }}>\r\n        <Card\r\n          sx={{\r\n            width: 600,\r\n            maxWidth: \"90vw\",\r\n            padding: 1,\r\n            margin: 1,\r\n            display: \"grid\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          {/* <Typography  variant=\"h5\">\r\n        My Workouts  \r\n        </Typography> */}\r\n        <Grid container spacing={2}>\r\n        <Grid item xs={6}>\r\n          <TextField\r\n            fullWidth\r\n            id=\"search\"\r\n            label=\"Search Workouts\"\r\n            type=\"search\"\r\n            onChange={this.handleSearchBoxChange}\r\n          />\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n          <FormControl fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">\r\n              Target Muscle Group\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"muscle-group-select\"\r\n              value={this.state.muscleGroup}\r\n              label=\"Target Muscle Group\"\r\n              onChange={this.handleMuscleGroupChange}\r\n            >\r\n               <MenuItem value=\"\">All</MenuItem>\r\n                <MenuItem value=\"Full Body\">Full Body</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Back\">Back</MenuItem>\r\n                <MenuItem value=\"Arms\">Arms</MenuItem>\r\n                <MenuItem value=\"Core\">Core</MenuItem>\r\n                <MenuItem value=\"Legs\">Legs</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12}>\r\n          <Accordion disabled\r\n          \r\n          >\r\n            <AccordionSummary\r\n              aria-controls=\"panel1a-content\"\r\n              id=\"panel1a-header\"\r\n            >\r\n              <Typography sx={{ width: \"45%\", flexShrink: 0 }}>\r\n                Workout \r\n              </Typography>\r\n              <Typography\r\n                sx={{ color: \"text.secondary\", width: \"35%\", flexShrink: 0 }}\r\n              >\r\n                Target Muscle\r\n              </Typography>\r\n              <Typography\r\n                sx={{ color: \"text.secondary\", width: \"20%\", flexShrink: 0 }}\r\n              >\r\n                Duration\r\n              </Typography>\r\n            </AccordionSummary>\r\n          </Accordion>\r\n          {this.state.workouts.filter(this.filterBySearch(this.state.search))\r\n          .filter(this.filterByMuscleGroup(this.state.muscleGroup)).map((workout) => (\r\n            < MyAccordion workout={workout} />\r\n          )\r\n            \r\n          )}\r\n\r\n          \r\n          </Grid>\r\n          </Grid>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Workouts;\r\n","import React from \"react\"\r\n\r\nimport { styled } from '@mui/material/styles';\r\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\r\nimport MuiAccordion from '@mui/material/Accordion';\r\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\r\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\r\nimport Typography from '@mui/material/Typography';\r\nimport Table from '@mui/material/Table';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableRow from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\n\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, query, onSnapshot, doc, getDoc, where  } from \"firebase/firestore\";\r\n\r\nconst Accordion = styled((props) => (\r\n  <MuiAccordion disableGutters elevation={0} square {...props} />\r\n))(({ theme }) => ({\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  '&:not(:last-child)': {\r\n    borderBottom: 0,\r\n  },\r\n  '&:before': {\r\n    display: 'none',\r\n  },\r\n}));\r\n\r\n\r\n\r\nconst AccordionSummary = styled((props) => (\r\n  <MuiAccordionSummary\r\n    expandIcon={<ArrowForwardIosSharpIcon sx={{ fontSize: '0.9rem' }} />}\r\n    {...props}\r\n  />\r\n))(({ theme }) => ({\r\n  backgroundColor:\r\n    theme.palette.mode === 'dark'\r\n      ? 'rgba(255, 255, 255, .05)'\r\n      : 'rgba(0, 0, 0, .03)',\r\n  flexDirection: 'row-reverse',\r\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\r\n    transform: 'rotate(90deg)',\r\n  },\r\n  '& .MuiAccordionSummary-content': {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nconst AccordionDetails = styled(MuiAccordionDetails)(({ theme }) => ({\r\n  padding: theme.spacing(2),\r\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\r\n}));\r\n\r\n// const handleChange = (panel) => (event, newExpanded) => {\r\n//   console.log(this.state.expanded)\r\n  \r\n//   // this.setState({expanded: newExpanded ? panel : false});\r\n// }\r\n\r\n// let workoutsFetched = false;\r\n\r\nclass MyWorkouts extends React.Component\r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      workouts: [],\r\n      expanded: ''\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    // const tableHead =  {\r\n\r\n    // }\r\n  }\r\n\r\n  handleChange(panel)\r\n  {\r\n    if (panel === this.state.expanded)\r\n    {\r\n      panel = false\r\n    }\r\n\r\n    this.setState({expanded: panel})\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const userRef = await doc(this.context.database, \"users\", this.context.user.uid)\r\n    // console.log(this.state.dateString);\r\n\r\n     //This is a complicated database pull\r\n    //This is three nested database calls, that combine documents from the:\r\n    //user-workouts, workouts and exercises collection.\r\n    //This is like a three-table SQL join, at the end of which we have a user workout record with all the info we need\r\n    let workouts = [];\r\n    const q = query(collection(this.context.database, \"user-workouts\"), where(\"user\", \"==\", userRef), where(\"completed\", \"==\", true));\r\n    const unsubscribe = onSnapshot(q, async (querySnapshot) => {\r\n      \r\n      // console.log(querySnapshot)\r\n      querySnapshot.forEach(async (doc) => \r\n      {\r\n          // console.log(doc);\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          let date = new Date()\r\n          date.setTime(data.date.seconds * 1000);\r\n          data.date.date = date;\r\n          let workoutRef = data.workout\r\n          let workoutSnap = await getDoc(workoutRef)\r\n          let workout = workoutSnap.data();\r\n          // console.log(workout)\r\n          data.workout = workout\r\n          data.workout.ref = workoutRef\r\n          let newExercises = []\r\n          for (let i = 0; i < data.exercises.length; i++)\r\n          {\r\n            let exerciseSnap = await getDoc(data.exercises[i].exerciseId)\r\n            let exercise = exerciseSnap.data()\r\n            exercise.sets = data.exercises[i].sets\r\n            exercise.exerciseId = data.exercises[i].exerciseId\r\n            newExercises.push(exercise)\r\n            // console.log(newExercises)\r\n          }\r\n          data.exercises = newExercises\r\n          // console.log(newExercises)\r\n          workouts.push(data);\r\n            this.setState({workouts: workouts}\r\n              // , () => console.log(this.state.workouts)\r\n              )\r\n          \r\n        \r\n\r\n      });\r\n      // console.log(\"Snapshot done\")\r\n      \r\n    });\r\n    // this.setState({creator: this.context.user.uid})\r\n    \r\n    \r\n    // console.log(this.state.workouts)\r\n  }\r\n\r\n  async componentDidUpdate() {\r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  render() {\r\n    return (\r\n      <div style={{width: 'fit-content', marginBottom: 66}}>\r\n        <Accordion id=\"header\" expanded={false} >\r\n          <MuiAccordionSummary aria-controls=\"panel1d-content\" id=\"panel1d-header\">\r\n            <Typography style={{cursor: 'default', width: 200, paddingLeft: '1.25em', marginRight: 6}}>Workout</Typography>\r\n            <Typography style={{width: 120, marginRight: 6}}>Target</Typography>\r\n            <Typography style={{width: 120, marginRight: 6}}>Date</Typography>\r\n            \r\n          </MuiAccordionSummary>\r\n\r\n        </Accordion>\r\n        {this.state.workouts.map((userWorkout) => (\r\n          <Accordion id={userWorkout.id} expanded={this.state.expanded === userWorkout.id} onChange={() => this.handleChange(userWorkout.id)}>\r\n          <AccordionSummary aria-controls=\"panel1d-content\" id=\"panel1d-header\">\r\n            <Typography style={{width: 200, marginRight: 6}}>{userWorkout.workout.name}</Typography>\r\n            <Typography style={{width: 120, marginRight: 6}}>{userWorkout.workout.targetMuscleGroup}</Typography>\r\n            <Typography style={{width: 120, marginRight: 6}}>{userWorkout.date.date.getDate()}/{userWorkout.date.date.getMonth()}/{userWorkout.date.date.getFullYear()}</Typography>\r\n            \r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow style={{}}>\r\n                  <TableCell style={{width: 150, fontWeight: 600}}>\r\n                    Exercise\r\n                  </TableCell>\r\n                  \r\n                  <TableCell style={{width: 110, fontWeight: 600}}>\r\n                    Target Muscle\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 1) ? '' : 'none'}}>\r\n                    Set 1\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 2) ? '' : 'none'}}>\r\n                    Set 2\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 3) ? '' : 'none'}}>\r\n                    Set 3\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 4) ? '' : 'none'}}>\r\n                    Set 4\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 5) ? '' : 'none'}}>\r\n                    Set 5\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 6) ? '' : 'none'}}>\r\n                    Set 6\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 7) ? '' : 'none'}}>\r\n                    Set 7\r\n                  </TableCell>\r\n                  <TableCell style={{width: 50, fontWeight: 600, display: (userWorkout.exercises[0].sets.length >= 8) ? '' : 'none'}}>\r\n                    Set 8\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n              {userWorkout.exercises.map((exercise) => (\r\n                <TableRow>\r\n                  <TableCell style={{width: 150}}>\r\n                  {exercise.name} \r\n                  </TableCell>\r\n                  <TableCell style={{width: 110}}>\r\n                  {exercise.dominantMuscle} \r\n                  </TableCell>\r\n                  {exercise.sets.map((set, index) => (\r\n                  <TableCell style={{width: 50}}>\r\n                    {set.weight} kg\r\n                  </TableCell>\r\n                ))}\r\n                </TableRow>\r\n                \r\n              ))}\r\n              </TableBody>\r\n            </Table>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MyWorkouts;","import React from 'react';\r\nimport Card from '@mui/material/Card';\r\nimport Typography from '@mui/material/Typography';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\nimport Button from '@mui/material/Button';\r\nimport Accordion from '@mui/material/Accordion';\r\nimport AccordionSummary from '@mui/material/AccordionSummary';\r\nimport AccordionDetails from '@mui/material/AccordionDetails';\r\n\r\n\r\n\r\nimport Grid from '@mui/material/Grid';\r\n\r\n\r\n\r\nconst cardStyle = {\r\n  // display: 'grid',\r\n  // justifyContent: 'center',\r\n  backgroundColor: '#e0e0e0', \r\n  padding: 4,\r\n  margin: 4,\r\n  maxWidth: '100%'\r\n}\r\n\r\nconst setHeader = {\r\n  fontWeight: 500,\r\n  display: 'flex',\r\n  justifyContent: 'center'\r\n}\r\n\r\nconst exerciseInput = {\r\n  m: 1, \r\n  // width: '30%',\r\n  backgroundColor: 'white'\r\n}\r\n\r\nconst exerciseButton = {\r\n  display: 'flex',\r\n  margin: 1,\r\n  \r\n  width: '97.5%',\r\n  height: '1.4375em',\r\n  padding: '16.5px 14px',\r\n  fontSize: '1rem'\r\n}\r\n\r\n\r\n\r\nclass Exercise extends React.Component {\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    let currSet = true;\r\n    this.props.details.set = this.props.set;\r\n    // console.log(\"Current Set: \", this.props.currSet, \" This Set: \", this.props.set);\r\n    if (this.props.set === this.props.currSet && this.props.currExercise === this.props.details.name)\r\n    {\r\n      currSet = false;\r\n      \r\n    }\r\n    let shrink = true\r\n    \r\n    if (this.props.details.weight === undefined || this.props.details.weight === 0)\r\n    {\r\n      shrink = false\r\n    }\r\n    \r\n\r\n    this.state = {\r\n      currSet: currSet,\r\n      weight: this.props.details.weight,\r\n      reps: this.props.details.reps,\r\n      overrideWorkoutSet: false,\r\n      shrink: shrink\r\n    }\r\n\r\n    \r\n    // console.log(this.props)\r\n    this.handleTextChange = this.handleTextChange.bind(this);\r\n    this.handleDoubleClick = this.handleDoubleClick.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.shrinkInput = this.shrinkInput.bind(this);\r\n    this.expandInput = this.expandInput.bind(this);\r\n  }\r\n\r\n  \r\n\r\n  handleTextChange(e) \r\n  {\r\n    if (e.target.id === \"outlined-weight\")\r\n    {\r\n      this.setState({weight: e.target.value})\r\n      this.props.details.weight = parseFloat(e.target.value, 10);\r\n    }\r\n    if (e.target.id === \"outlined-reps\")\r\n    {\r\n      this.setState({reps: e.target.value})\r\n      this.props.details.reps = parseFloat(e.target.value, 10)\r\n      \r\n    }\r\n  }\r\n\r\n  handleDoubleClick()\r\n  {\r\n    // console.log(\"Double click\")\r\n    this.setState({currSet: false, overrideWorkoutSet: true})\r\n  }\r\n\r\n  handleBlur()\r\n  {\r\n    if (this.state.overrideWorkoutSet)\r\n    {\r\n      this.setState({currSet: true, overrideWorkoutSet: false})\r\n    \r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // console.log(this.state.currSet);\r\n    //This If statement checks whether this is the current exercise for the current set\r\n    //This controls whether the input is enabled\r\n    //The boolean is somewhat reversed: false means it's not the current set\r\n    if (this.props.currSet === this.props.set && this.state.currSet \r\n      && this.props.currExercise === this.props.details.name\r\n      )\r\n    {  \r\n      this.setState({currSet: false})\r\n    }\r\n    else if (!this.state.overrideWorkoutSet && !this.state.currSet && (this.props.currSet !== this.props.set \r\n      || this.props.currExercise !== this.props.details.name)\r\n      ) \r\n    {\r\n      this.setState({currSet: true})\r\n    }\r\n    \r\n    if (this.props.currExercise === this.props.details.name && this.props.details.weight !== undefined && prevState.weight === undefined)\r\n    {\r\n      // console.log(\"Component Updated and \" + prevProps.details.weight + \" and \" + prevState.weight)\r\n      this.setState({weight: this.props.details.weight, shrink: true})\r\n    }\r\n  }\r\n\r\n  //These functions manually handle the shrinking and expansion of the input label\r\n  //We have to do this manually because the state being set doesn't caused the input shrink to change.\r\n  shrinkInput() {\r\n    this.setState({shrink: true})\r\n  }\r\n\r\n  expandInput(e){\r\n    if (e.target.value === \"\")\r\n    {\r\n      this.setState({shrink:false})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const blurFunction = (this.state.overrideWorkoutSet) ? () => {this.props.saveExercise(this.props.details, this.props.set, this.props.exerciseIndex); this.handleBlur()} : null;\r\n    return (\r\n      \r\n      <Grid item xs={12} id={this.state.Exercise + \"-\" + this.props.set} onBlur={blurFunction} onDoubleClick={this.handleDoubleClick} style={{display:'flex', alignItems: 'center', flexDirection: 'column'}}>\r\n         <Grid container spacing={1} style={{width: '100%', display: 'flex', flexDirection: 'row'}}>\r\n          {/* {(this.state.currSet) &&\r\n              <div id={this.props.details.name+\"-\"+this.props.set} \r\n              style={{\r\n                      // width:'100%', \r\n                      \r\n                      position: 'absolute', \r\n                      height:'100%', \r\n                      // left: '0px', \r\n                      // right: '0px', \r\n                      // bottom: '0px', \r\n                      // top: '0px', \r\n                      zIndex: '99999'}}>\r\n\r\n                      </div>\r\n          } */}\r\n          <Grid item xs={8}>\r\n          <FormControl fullWidth sx={exerciseInput}  variant=\"outlined\">\r\n          <InputLabel shrink={this.state.shrink} htmlFor=\"outlined-weight\">Weight (kg)</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-weight\"\r\n            type=\"number\"\r\n            onClick={this.shrinkInput}\r\n            onBlur={this.expandInput}\r\n            value={this.state.weight}\r\n            onChange={this.handleTextChange}\r\n            label=\"Weight (KG)\"\r\n            \r\n            disabled={this.state.currSet}\r\n          />\r\n          </FormControl>\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n          <FormControl sx={exerciseInput}  variant=\"outlined\">\r\n          <InputLabel htmlFor=\"outlined-email\">Reps</InputLabel>\r\n          <OutlinedInput\r\n            id=\"outlined-reps\"\r\n            type=\"number\"\r\n            value={this.state.reps}\r\n            onChange={this.handleTextChange}\r\n            label=\"Reps\"\r\n            disabled={this.state.currSet}\r\n            \r\n          />\r\n          </FormControl>\r\n          </Grid>\r\n          </Grid>\r\n          \r\n          {(!this.state.currSet && !this.state.overrideWorkoutSet ) && \r\n          // <div>\r\n          <Button disabled={(this.state.weight > 0 || this.props.details.weight) ? false : true} variant=\"contained\"  onClick={() => {this.props.saveExercise(this.props.details, this.props.set, this.props.exerciseIndex)}} style={exerciseButton}>\r\n            Save Set\r\n          </Button>\r\n          // </div>\r\n}\r\n        </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nfunction Sets(props) {\r\n  var set = [];\r\n  for (let i = 0; i < props.sets; i++)\r\n  {\r\n    set.push(<Grid item xs={12}><Exercise currExercise={props.currExercise} exerciseIndex={props.exerciseIndex} saveExercise={props.saveExercise} set={i+1} currSet={props.currSet} details={props.details}/></Grid>);\r\n  }\r\n\r\n  return <Card style={cardStyle}>\r\n          <Grid item xs={12}>\r\n          <Typography style={setHeader}>{props.details.name}</Typography>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n          <Accordion  sx={{ m: 1, width: 'auto' , \"&&expanded\" : {\r\n          margin: 1,\r\n          \r\n        }}}>\r\n            <AccordionSummary>\r\n              <Typography>\r\n                Expand for info\r\n\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails style={{display:'grid', alignItems:'center'}}>\r\n              {/* <img src={props.details.img} alt={props.details.name} style={{width:'100%', height: '100%'}} /> */}\r\n              <Typography style={{marginBottom: 12}}>\r\n                <b>Target Muscle:</b> {props.details.dominantMuscle} <br />\r\n                {/* Tips: {props.details.cues} */}\r\n              </Typography>\r\n              <Typography style={{marginBottom: 12}}>\r\n                <b>Exercise Guide:</b> {props.details.exerciseGuide}\r\n              </Typography>\r\n              <Button variant=\"contained\" color=\"success\">\r\n                See More\r\n              </Button>\r\n              \r\n            </AccordionDetails>\r\n          </Accordion>\r\n          </Grid>\r\n          \r\n          {set}\r\n          \r\n          </Card>;\r\n}\r\n\r\nclass WorkoutCard extends React.Component {\r\n  // constructor(props)\r\n  // {\r\n  //   super(props);\r\n    \r\n  // }\r\n\r\n  \r\n  \r\n  render() {\r\n    // console.log(this.props.details);\r\n    return (\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n        \r\n        {<Sets currExercise={this.props.currExercise} exerciseIndex={this.props.exerciseIndex} saveExercise={this.props.saveExercise} currSet={this.props.currSet} details={this.props.details} sets={this.props.sets} />}\r\n        </Grid>\r\n        \r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WorkoutCard;","import React, {useEffect, useState} from \"react\"\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport OutlinedInput from '@mui/material/OutlinedInput';\r\n\r\n\r\n\r\nconst inputStyle = {\r\n  marginTop: 1,\r\n  marginBottom: 1,\r\n  width: 80\r\n}\r\n\r\nfunction RestTimer({duration, startTimer}) {\r\n  const [started, setStarted] = useState(false);\r\n  const [remaining, setRemaining] = useState(duration);\r\n\r\n  useEffect(() => {\r\n    if (started === true)\r\n    {\r\n      const timer = setTimeout(() => {\r\n        setRemaining(remaining - 1)\r\n      }, 1000)\r\n  \r\n      if (remaining === 0)\r\n      {\r\n        clearTimeout(timer);\r\n        startTimer();\r\n      }\r\n\r\n      return () => clearTimeout(timer)\r\n    }\r\n    \r\n\r\n  \r\n  })\r\n\r\nfunction handleChange(e) {\r\n  setRemaining(e.target.value)\r\n}\r\n\r\n  \r\n\r\n  return(\r\n    <div style={{display:'flex', alignItems: 'center', gap: 4, flexDirection: 'column', padding: 5}}>\r\n      <Typography variant=\"h5\">\r\n        Rest\r\n      </Typography>\r\n      {(started) ? \r\n      \r\n      <Typography variant=\"h4\">\r\n        {remaining}\r\n      </Typography>\r\n      \r\n      : <div style={{display:'flex', alignItems: 'center', gap: 4, flexDirection: 'column', padding: 5}}>\r\n          <Typography>Set Timer</Typography>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Seconds</InputLabel>\r\n            <OutlinedInput\r\n              id=\"timer-length\"\r\n              type=\"number\"\r\n              \r\n              value={remaining}\r\n              onChange={handleChange}\r\n              label=\"Seconds\"\r\n            />\r\n          </FormControl>\r\n        </div>\r\n      }\r\n      \r\n      {(started) ? <Button size=\"small\" onClick={startTimer} variant=\"contained\">Finish</Button>\r\n      : <Button size=\"small\" onClick={() => setStarted(true)} variant=\"contained\" color=\"success\"> Start Timer </Button>  \r\n      }\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RestTimer;","import React, {useState, useContext, useEffect, useRef} from \"react\"\r\nimport {\r\n  useParams\r\n} from \"react-router-dom\";\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\r\nimport WorkoutCard from \"./WorkoutCard\";\r\nimport RestTimer from './RestTimer';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\nimport Modal from '@mui/material/Modal';\r\nimport Box from '@mui/material/Box';\r\nimport Paper from '@mui/material/Paper';\r\n\r\nconst timerBox = {\r\n  position: 'absolute',\r\n  marginTop: 8,\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: 150,\r\n  bgcolor: 'background.paper',\r\n  // border: '2px solid #000',\r\n  boxShadow: 24,\r\n  padding: 4,\r\n  // overflow: 'scroll',\r\n}\r\n\r\n//This component is a functional component so we can access the useParams() funciton with React-Router-Dom\r\nexport default function Workout(props) {\r\n  //Initialising state - user appears to be unnecessary\r\n    // const [user, setUser] = useState(props.user)\r\n    const [userWorkout, setUserWorkout] = useState();\r\n    const [workout, setWorkout] = useState();\r\n    const [exercisesArr, setExercisesArr] = useState([]);\r\n    const [currSet, setCurrSet] = useState(1);\r\n    const [currExercise, setCurrExercise] = useState(0);\r\n    const [exercise, setExercise] = useState(\"\");\r\n    const [timer, setTimer] = useState(false);\r\n\r\n\r\n    // let loadCompleted = false;\r\n    let loadInProgress = useRef(false);\r\n    // let exercisesLookup = false;\r\n    const firebase = useContext(FirebaseContext)\r\n\r\n    // The database ID of the user-workout is taken from the URL\r\n    let {userWorkoutId} = useParams()\r\n    const userWorkoutRef = doc(firebase.database, \"user-workouts\", userWorkoutId);\r\n    async function getUserWorkout() {\r\n      loadInProgress = true;\r\n      // We get the reference of the user-workout in the database\r\n      \r\n\r\n      const docSnap = await getDoc(userWorkoutRef);\r\n      if (docSnap.exists()) {\r\n        const data = docSnap.data();\r\n        setUserWorkout(data);\r\n        // console.log(data);\r\n        //Calling the function to get the workout\r\n        await getWorkout(data.workout)\r\n        \r\n      }\r\n\r\n      \r\n\r\n\r\n    }\r\n    async function getWorkout(workoutId) {\r\n      // loadInProgress = true;\r\n      const docRef = workoutId;\r\n      // console.log(userWorkout);\r\n      const docSnap = await getDoc(docRef);\r\n      //We try to use the data only if getDoc receives a response. In this case we have verified that the user has an associated record in the database\r\n      if (docSnap.exists()) {\r\n        // console.log(docRef);\r\n        const data = docSnap.data();\r\n        //We now set State inside this response, as we need to combine the records of the user from the Auth and the DB\r\n        setWorkout(data);\r\n        // console.log(data);\r\n      } else {\r\n      }\r\n      \r\n    }\r\n\r\n    async function getExercises () {\r\n      // console.log(userWorkout.exercises)\r\n      let newExercisesArr = exercisesArr;\r\n      \r\n      for (let i = 0; i < userWorkout.exercises.length; i++)\r\n      {\r\n        let docRef = userWorkout.exercises[i].exerciseId;\r\n          // console.log(userWorkout.exercises[i]);\r\n          let docSnap = await getDoc(docRef);\r\n          let data = docSnap.data();\r\n          data.reps = workout.exercises[i].reps;\r\n          data.weight = userWorkout.exercises[i].weight;\r\n          newExercisesArr = newExercisesArr.concat(data);\r\n          // console.log(docSnap.data());\r\n          \r\n        \r\n\r\n        // console.log(docRef);\r\n      }\r\n      console.log(newExercisesArr);\r\n      setExercisesArr(newExercisesArr);\r\n      setExercise(newExercisesArr[currExercise].name);\r\n      \r\n      // loadCompleted = true;\r\n      loadInProgress = false;\r\n    }\r\n\r\n    //Two code block below initialise the call of the functions above.\r\n    //If workout is not set, we start the API call get getting the UserWorkout\r\n    \r\n    if (!workout)\r\n    {\r\n      getUserWorkout();\r\n      \r\n    }\r\n\r\n    // getUserWorkout() calls getWorkout, which sets workout = true\r\n    // useEffect checks each render if there is no load currently in progress \r\n    // If no load is in progress and workout = true, we init the exercises functions\r\n    useEffect(() => {\r\n      //\r\n      if (!loadInProgress.current && workout) {\r\n        loadInProgress.current = true;\r\n        getExercises()\r\n    }\r\n    })\r\n\r\n    function saveExercise(details, set, exerciseIndex) {\r\n\r\n      userWorkout.exercises[exerciseIndex].sets[set - 1].weight = details.weight;\r\n      userWorkout.exercises[exerciseIndex].sets[set - 1].reps = details.reps;\r\n      let newExercisesArr = exercisesArr\r\n      newExercisesArr[exerciseIndex].weight = details.weight;\r\n      setExercisesArr(newExercisesArr);\r\n      // console.log(exercisesArr)\r\n      if (currSet + 1 <= workout.sets)\r\n      {\r\n        setCurrSet(currSet + 1)\r\n      }\r\n      else if (currExercise === exercisesArr.length - 1)\r\n      {\r\n        console.log(\"Workout Complete\")\r\n        // setCurrExercise(currExercise+1);\r\n        setExercise(\"None\")\r\n      }\r\n      else \r\n      {\r\n        // console.log(\"Exercise Finished\")\r\n        setCurrExercise(currExercise+1);\r\n        setExercise(exercisesArr[currExercise+1].name)\r\n        setCurrSet(1)\r\n      }\r\n\r\n      setTimer(true)\r\n      // console.log(currSet, currExercise, exercise)\r\n    }\r\n\r\n    async function finishWorkout() {\r\n      userWorkout.completed = true;\r\n      console.log(userWorkout);\r\n\r\n      updateDoc(userWorkoutRef, userWorkout)\r\n    }\r\n    \r\n    function startTimer() {\r\n      setTimer(!timer)\r\n    }\r\n    \r\n    return(\r\n      <div style={{display: 'flex', justifyContent: 'center', marginBottom: '70px'}}>\r\n        {(workout && exercisesArr.length > 0) ? \r\n        <div style={{display: 'grid', justifyContent: 'center'}}>\r\n          <Typography variant=\"h5\" style={{display: 'flex', justifyContent: 'center'}}>\r\n            {workout.name}\r\n            </Typography>\r\n            {exercisesArr.map((s, index) => {\r\n              return (\r\n                <WorkoutCard id={\"card-\" + index } exerciseIndex={index} currExercise={exercise} saveExercise={saveExercise} currSet={currSet} details={s} sets={workout.sets} />\r\n              )\r\n            })}\r\n          \r\n          {exercise === \"None\" &&\r\n            <Button variant=\"contained\" onClick={finishWorkout}>\r\n            Finish Workout\r\n            </Button>\r\n          }\r\n          \r\n          <Modal\r\n          open={timer}\r\n          onClose={startTimer}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\">\r\n          <Box style={timerBox}>\r\n            <Paper>\r\n              {/* <Typography>Timer</Typography> */}\r\n              <RestTimer duration={60}  startTimer={startTimer}/>\r\n            </Paper>\r\n          </Box>\r\n        </Modal>  \r\n        </div> :\r\n        <div>\r\n          Loading workout...\r\n        </div>}\r\n      </div>\r\n    )\r\n}\r\n\r\n// export default Workout;","import React from \"react\";\r\nimport Grid from  \"@mui/material/Grid\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Link from \"@mui/material/Link\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nimport {\r\n  Link as RouterLink\r\n} from \"react-router-dom\";\r\n\r\nconst gridStyle = {\r\n  height: 150,\r\n  marginBottom: 12\r\n}\r\n\r\nconst cardPaper = {\r\n  height: '80%',\r\n  padding: 20,\r\n  paddingLeft: 40,\r\n  paddingRight: 40,\r\n  marginTB: 10\r\n}\r\n\r\nconst cardHeader = {\r\n  width: '100%',\r\n  padding: 1,\r\n  paddingLeft: 5,\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  // gap: '2em',\r\n  fontWeight: 550\r\n}\r\n\r\nconst cardText = {\r\n  fontSize: '1.15em',\r\n  display: 'flex',\r\n  justifyContent: 'center'\r\n}\r\n\r\nclass CreationCenter extends React.Component\r\n{\r\n  render () {\r\n    return (\r\n      <Grid container spacing={2} style={{marginBottom: 64}}>\r\n        <Grid item xs={12} sm={6}  style={gridStyle}>\r\n          <Link component={RouterLink} to=\"/create-workout\" style={{textDecoration: 'none'}}>\r\n          <Paper style={cardPaper}>\r\n          <Typography style={cardHeader}>\r\n            Create Workout\r\n          </Typography>\r\n          <Typography style={cardText}>\r\n            Create a new workout, that users will be able to select to do.\r\n          </Typography >\r\n          </Paper>\r\n          </Link>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} style={gridStyle}>\r\n          <Link component={RouterLink} to=\"/create-exercise\" style={{textDecoration: 'none'}}>\r\n          <Paper style={cardPaper}>\r\n          <Typography style={cardHeader}>\r\n            Create Exercise\r\n          </Typography>\r\n          <Typography style={cardText}>\r\n            Create a new exercise, that will be available when creating a workout.\r\n          </Typography >\r\n          </Paper>\r\n          </Link>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} style={gridStyle}>\r\n          <Link component={RouterLink} to=\"/edit-exercises\" style={{textDecoration: 'none'}}>\r\n          <Paper style={cardPaper}>\r\n          <Typography style={cardHeader}>\r\n            Edit Exercises\r\n          </Typography>\r\n          <Typography style={cardText}>\r\n            Make changes to the existing exercises.\r\n          </Typography >\r\n          </Paper>\r\n          </Link>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6} style={gridStyle}>\r\n          <Link component={RouterLink} to=\"/edit-workouts\" style={{textDecoration: 'none'}}>\r\n          <Paper style={cardPaper}>\r\n          <Typography style={cardHeader}>\r\n            Edit Workouts\r\n          </Typography>\r\n          <Typography style={cardText}>\r\n            Make changes to the existing workouts.\r\n          </Typography >\r\n          </Paper>\r\n          </Link>\r\n        </Grid>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CreationCenter;","import React from \"react\"\r\nimport Box from \"@mui/material/Box\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\r\nimport Select from '@mui/material/Select'; \r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport ListSubheader from '@mui/material/ListSubheader';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Modal from '@mui/material/Modal';\r\nimport Paper from '@mui/material/Paper';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport { deleteDoc, doc, updateDoc } from \"firebase/firestore\";\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\n\r\nconst inputStyle = {\r\n  backgroundColor: 'white',\r\n  marginBottom: '.5em',\r\n  width: '85vw',\r\n  marginLeft: 1\r\n}\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  backgroundColor: 'background.paper',\r\n  // border: '2px solid #000',\r\n  boxShadow: 24,\r\n  padding: 12,\r\n}\r\n\r\nclass EditExercise extends React.Component\r\n{\r\n  static contextType = FirebaseContext\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      id: this.props.exercise.id,\r\n      exerciseName: this.props.exercise.name,\r\n      dominantMuscle: this.props.exercise.dominantMuscle,\r\n      synergisticMuscle: \"\",\r\n      exerciseGuide: this.props.exercise.exerciseGuide,\r\n      exerciseTutorial: \"\",\r\n      exerciseSubType: this.props.exercise.exerciseSubType,\r\n      img: \"\",\r\n      openDialog: false,\r\n      exercises: []\r\n    }\r\n\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.handleMuscleChange = this.handleMuscleChange.bind(this);\r\n    this.changeDialogState = this.changeDialogState.bind(this);\r\n    // this.createExercise = this.createExercise.bind(this);\r\n    this.handleTypeChange = this.handleTypeChange.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.updateExercise = this.updateExercise.bind(this);\r\n    this.deleteExercise = this.deleteExercise.bind(this);\r\n  }\r\n\r\n  handleTextBoxChange(e){\r\n    if (e.target.id === \"exercise-name\")\r\n    {\r\n      this.setState({exerciseName: e.target.value})\r\n    }\r\n    if (e.target.id === \"exercise-guide\")\r\n    {\r\n      this.setState({exerciseGuide: e.target.value})\r\n    }\r\n  }\r\n\r\n  handleMuscleChange(e) {\r\n    this.setState({dominantMuscle: e.target.value})\r\n  }\r\n\r\n  handleTypeChange(e) {\r\n    this.setState({exerciseSubType: e.target.value})\r\n  }\r\n\r\n  changeDialogState() {\r\n    this.setState({openDialog: !this.state.openDialog})\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({open: !this.state.open})\r\n  }\r\n\r\n  async updateExercise() {\r\n    const docRef = doc(this.context.database, \"exercises\", this.state.id);\r\n    await updateDoc(docRef, {\r\n      name: this.state.exerciseName,\r\n      dominantMuscle: this.state.dominantMuscle,\r\n      exerciseGuide: this.state.exerciseGuide,\r\n      exerciseSubType: this.state.exerciseSubType,\r\n      exerciseType: 'resistance'\r\n    })\r\n\r\n    this.setState({open: false})\r\n  }\r\n\r\n  async deleteExercise() {\r\n    const docRef = doc(this.context.database, \"exercises\", this.state.id);\r\n    this.setState({open: false})\r\n    await deleteDoc(docRef).catch((error) =>{\r\n      console.log(error);\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n      <Button onClick={this.handleClose}>\r\n        Edit\r\n      </Button>\r\n      <Modal\r\n        open={this.state.open}\r\n        onClose={this.handleClose}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\">\r\n      <Box style={modalStyle}>\r\n        <Paper style={{margin: 2}}>\r\n        <Typography variant='h5' style={{paddingTop: 6, paddingLeft: 8, marginBottom: '.5em'}}>\r\n            Edit Exercise\r\n          </Typography>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Name</InputLabel>\r\n            <OutlinedInput\r\n              id=\"exercise-name\"\r\n              type=\"text\"\r\n              value={this.state.exerciseName}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Name\"\r\n            />\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Primary Muscle</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"primary-muscle-select\"\r\n              value={this.state.dominantMuscle}\r\n              label=\"Primary Muscle\"\r\n              onChange={this.handleMuscleChange}\r\n              >\r\n                <ListSubheader>Shoulders, Chest and Back</ListSubheader>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Traps\">Traps</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Lats\">Lats</MenuItem>\r\n                <ListSubheader>Arms</ListSubheader>\r\n                <MenuItem value=\"Triceps\">Triceps</MenuItem>\r\n                <MenuItem value=\"Biceps\">Biceps</MenuItem>\r\n                <ListSubheader>Core</ListSubheader>\r\n                <MenuItem value=\"Abs\">Abs</MenuItem>\r\n                <MenuItem value=\"Obliques\">Obliques</MenuItem>\r\n                <MenuItem value=\"Spinal Erectors\">Spinal Erectors</MenuItem>\r\n                <ListSubheader>Legs</ListSubheader>\r\n                <MenuItem value=\"Quads\">Quads</MenuItem>\r\n                <MenuItem value=\"Hamstrings\">Hamstrings</MenuItem>\r\n                <MenuItem value=\"Calves\">Calves</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Exercise Type</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"primary-muscle-select\"\r\n              value={this.state.exerciseSubType}\r\n              label=\"Exercise Type\"\r\n              onChange={this.handleTypeChange}\r\n              >\r\n                \r\n                <MenuItem value=\"Compound Lift\">Compound Lift</MenuItem>\r\n                <MenuItem value=\"Isolation\">Isolation Exercise</MenuItem>\r\n                <MenuItem value=\"Machine\">Machine</MenuItem>\r\n                \r\n            </Select>\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n                <TextField\r\n                id=\"exercise-guide\"\r\n                label=\"Exercise Guide\"\r\n                multiline\r\n                rows={4}\r\n                value={this.state.exerciseGuide}\r\n                placeholder=\"Enter a guide for the exercise here\"\r\n                onChange={this.handleTextBoxChange}\r\n              />\r\n          </FormControl>\r\n          <div style={{display: 'flex', justifyContent: 'center', gap: 4, marginBottom: 8}}>\r\n          <Button \r\n            variant=\"contained\" color=\"success\" \r\n            onClick={this.updateExercise}\r\n            >\r\n            Save Exercise\r\n          </Button>\r\n          <Button \r\n            variant=\"contained\" color=\"error\" \r\n          \r\n            onClick={this.deleteExercise}\r\n            >\r\n            Delete Exercise\r\n          </Button>\r\n          </div>\r\n          </Paper>\r\n      </Box>\r\n      </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditExercise;","import React from \"react\";\r\nimport Card from \"@mui/material/Card\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\r\nimport Select from '@mui/material/Select'; \r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport ListSubheader from '@mui/material/ListSubheader';\r\nimport TextField from '@mui/material/TextField';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\n\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, addDoc, query, where, onSnapshot  } from \"firebase/firestore\";\r\n\r\nconst cardStyle = {\r\n  display: 'grid',\r\n  justifyContent: 'center',\r\n  backgroundColor: '#e0e0e0', \r\n  padding: 6,\r\n  paddingBottom: 16,\r\n  paddingTop: 16,\r\n  margin: 4,\r\n  width: '90vw'\r\n}\r\n\r\nconst inputStyle = {\r\n  backgroundColor: 'white',\r\n  marginBottom: '.5em',\r\n  width: '85vw'\r\n}\r\n\r\nclass CreateExercise extends React.Component \r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      exerciseName: \"\",\r\n      dominantMuscle: \"\",\r\n      synergisticMuscle: \"\",\r\n      exerciseGuide: \"\",\r\n      exerciseTutorial: \"\",\r\n      exerciseSubType: \"\",\r\n      img: \"\",\r\n      openDialog: false,\r\n      exercises: []\r\n    }\r\n\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.handleMuscleChange = this.handleMuscleChange.bind(this);\r\n    this.changeDialogState = this.changeDialogState.bind(this);\r\n    this.createExercise = this.createExercise.bind(this);\r\n    this.handleTypeChange = this.handleTypeChange.bind(this);\r\n  }\r\n\r\n  async componentDidUpdate() {\r\n    const q = query(collection(this.context.database, \"exercises\"), where(\"exerciseType\", \"==\", \"resistance\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const exercises = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          exercises.push({data});\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      if (exercises.length !== this.state.exercises.length)\r\n      {\r\n        this.setState({exercises: exercises})\r\n      }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  handleTextBoxChange(e){\r\n    if (e.target.id === \"exercise-name\")\r\n    {\r\n      this.setState({exerciseName: e.target.value})\r\n    }\r\n    if (e.target.id === \"exercise-guide\")\r\n    {\r\n      this.setState({exerciseGuide: e.target.value})\r\n    }\r\n  }\r\n\r\n  handleMuscleChange(e) {\r\n    this.setState({dominantMuscle: e.target.value})\r\n  }\r\n\r\n  handleTypeChange(e) {\r\n    this.setState({exerciseSubType: e.target.value})\r\n  }\r\n\r\n  changeDialogState() {\r\n    this.setState({openDialog: !this.state.openDialog})\r\n  }\r\n\r\n  async createExercise() {\r\n    console.log(\"Creating Exercise...\")\r\n    if (this.props.modalCloser)\r\n    {\r\n      this.props.modalCloser();\r\n    }\r\n\r\n    const docRef = await addDoc(collection(this.context.database, \"exercises\"), {\r\n      name: this.state.exerciseName,\r\n      dominantMuscle: this.state.dominantMuscle,\r\n      exerciseGuide: this.state.exerciseGuide,\r\n      exerciseSubType: this.state.exerciseSubType,\r\n      exerciseType: 'resistance'\r\n    })\r\n    \r\n    console.log(\"Document added to Firestore: \" + docRef.id);\r\n    this.changeDialogState();\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{display:'grid', justifyContent: 'center'}}>\r\n        <Card style={cardStyle}>\r\n          <Typography variant='h5' style={{marginBottom: '.5em'}}>\r\n            Create Exercise\r\n          </Typography>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Name</InputLabel>\r\n            <OutlinedInput\r\n              id=\"exercise-name\"\r\n              type=\"text\"\r\n              value={this.state.exerciseName}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Name\"\r\n            />\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Primary Muscle</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"primary-muscle-select\"\r\n              value={this.state.dominantMuscle}\r\n              label=\"Primary Muscle\"\r\n              onChange={this.handleMuscleChange}\r\n              >\r\n                <ListSubheader>Shoulders, Chest and Back</ListSubheader>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Traps\">Traps</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Lats\">Lats</MenuItem>\r\n                <ListSubheader>Arms</ListSubheader>\r\n                <MenuItem value=\"Triceps\">Triceps</MenuItem>\r\n                <MenuItem value=\"Biceps\">Biceps</MenuItem>\r\n                <ListSubheader>Core</ListSubheader>\r\n                <MenuItem value=\"Abs\">Abs</MenuItem>\r\n                <MenuItem value=\"Obliques\">Obliques</MenuItem>\r\n                <MenuItem value=\"Spinal Erectors\">Spinal Erectors</MenuItem>\r\n                <ListSubheader>Legs</ListSubheader>\r\n                <MenuItem value=\"Quads\">Quads</MenuItem>\r\n                <MenuItem value=\"Hamstrings\">Hamstrings</MenuItem>\r\n                <MenuItem value=\"Calves\">Calves</MenuItem>\r\n                <MenuItem value=\"Glutes\">Glutes</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Exercise Type</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"primary-muscle-select\"\r\n              value={this.state.exerciseSubType}\r\n              label=\"Exercise Type\"\r\n              onChange={this.handleTypeChange}\r\n              >\r\n                \r\n                <MenuItem value=\"Compound Lift\">Compound Lift</MenuItem>\r\n                <MenuItem value=\"Isolation\">Isolation Exercise</MenuItem>\r\n                <MenuItem value=\"Machine\">Machine</MenuItem>\r\n                <MenuItem value=\"Core\">Core</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl sx={inputStyle} variant=\"outlined\" required>\r\n                <TextField\r\n                id=\"exercise-guide\"\r\n                label=\"Exercise Guide\"\r\n                multiline\r\n                rows={4}\r\n                value={this.state.exerciseGuide}\r\n                placeholder=\"Enter a guide for the exercise here\"\r\n                onChange={this.handleTextBoxChange}\r\n              />\r\n          </FormControl>\r\n          <Button variant=\"contained\" color=\"success\" onClick={this.changeDialogState}>\r\n            Create Exercise\r\n          </Button>\r\n        </Card>\r\n        <Dialog\r\n          open={this.state.openDialog}\r\n          onClose={this.changeDialogState}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\">\r\n            <DialogTitle id=\"alert-dialog-title\">\r\n                {\"Create new exercise?\"}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <Typography>\r\n                <b>Exercise Name:</b> {this.state.exerciseName} <br />\r\n              </Typography>\r\n              <Typography>\r\n                <b>Target Muscle:</b> {this.state.dominantMuscle} <br />\r\n              </Typography>\r\n              <Typography>  \r\n                <b>Exercise Guide:</b> {this.state.exerciseGuide} <br />\r\n              </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={this.changeDialogState}>Disagree</Button>\r\n              <Button onClick={this.createExercise} autoFocus>\r\n                Agree\r\n              </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n        \r\n        \r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CreateExercise;\r\n","import React from \"react\";\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TablePagination from '@mui/material/TablePagination';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Modal from '@mui/material/Modal';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\n// import TableSortLabel from '@mui/material/TableSortLabel';\r\nimport Button from '@mui/material/Button';\r\n// import { DataGrid } from '@mui/x-data-grid';\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\n\r\nimport EditExercise from \"./EditExercise\";\r\nimport CreateExercise from \"./CreateExercise\";\r\nimport { collection, query, where, onSnapshot  } from \"firebase/firestore\";\r\n\r\nconst tableHead = {\r\n  fontWeight: 550\r\n}\r\n\r\n// const columns = [\r\n//   {field: 'name', headerName: 'Name', width: 180, editable: true},\r\n//   {field: 'dominantMuscle', headerName: 'Target Muscle', width: 170, editable: true},\r\n//   {field: 'exerciseSubType', headerName: 'Exercise Type', width: 170, editable: true},\r\n//   {field: 'exerciseGuide', headerName: 'Exercise Guide', width: 1200, editable: true}\r\n// ]\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  bgcolor: 'background.paper',\r\n  // border: '2px solid #000',\r\n  boxShadow: 24,\r\n  p: 4,\r\n}\r\n\r\nclass EditExercises extends React.Component\r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      creator: \"\",\r\n      exercises: [],\r\n      selectedExercises: [],\r\n      rowsPerPage: 10,\r\n      page: 0,\r\n      exerciseCreateOpen: false\r\n    }\r\n\r\n    this.handleChangePage = this.handleChangePage.bind(this);\r\n    this.handleChangeRowsPerPage = this.handleChangeRowsPerPage.bind(this);\r\n    this.switchModalState = this.switchModalState.bind(this);\r\n  }\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"exercises\"), where(\"exerciseType\", \"==\", \"resistance\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const exercises = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          // console.log(doc.id);\r\n          exercises.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // {\r\n        this.setState({exercises: exercises})\r\n      // }\r\n    });\r\n  }\r\n\r\n  handleChangePage(event, newPage) {\r\n    this.setState({page: newPage})\r\n  }\r\n\r\n  handleChangeRowsPerPage(event) {\r\n    this.setState({rowsPerPage: parseInt(event.target.value, 10), page: 0});\r\n\r\n  }\r\n\r\n  switchModalState() {\r\n    this.setState({exerciseCreateOpen: !this.state.exerciseCreateOpen})\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div style={{marginBottom: 66}}>\r\n        <TableContainer>\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow id=\"header-row\">\r\n                <TableCell><Typography style={tableHead}>Exercise Name</Typography></TableCell>\r\n                <TableCell><Typography style={tableHead}>Exercise Type</Typography></TableCell>\r\n                <TableCell><Typography style={tableHead}>Target Muscle</Typography></TableCell>\r\n                <TableCell><Typography style={tableHead}></Typography></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {this.state.exercises.slice(this.state.page * this.state.rowsPerPage, this.state.page * this.state.rowsPerPage + this.state.rowsPerPage).map((row) => (\r\n                <TableRow id={row.id}>\r\n                  <TableCell>{row.name}</TableCell>\r\n                  <TableCell>{row.exerciseSubType}</TableCell>\r\n                  <TableCell>{row.dominantMuscle}</TableCell>\r\n                  <TableCell>\r\n                    <EditExercise exercise={row} />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))\r\n\r\n              }\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={this.state.exercises.length}\r\n          rowsPerPage={this.state.rowsPerPage}\r\n          page={this.state.page}\r\n          onPageChange={this.handleChangePage}\r\n          onRowsPerPageChange={this.handleChangeRowsPerPage}\r\n        />\r\n        <Button variant=\"contained\" onClick={this.switchModalState} style={{marginRight: 4}}>\r\n          Add New Exercise\r\n        </Button>\r\n        \r\n        <Modal\r\n          open={this.state.exerciseCreateOpen}\r\n          onClose={this.switchModalState}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\">\r\n            <Box style={modalStyle}>\r\n              <CreateExercise\r\n                modalCloser={this.switchModalState} />\r\n            </Box>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditExercises;","import React from \"react\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Slider from \"@mui/material/Slider\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport { DataGrid } from '@mui/x-data-grid';\r\nimport { Redirect } from 'react-router-dom';\r\nimport CreateExercise from \"./CreateExercise\";\r\n\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, doc, addDoc, query, where, onSnapshot  } from \"firebase/firestore\";\r\n\r\nconst inputStyle = {\r\n  backgroundColor: 'white',\r\n  // marginBottom: '.5em'\r\n  // width: '85vw'\r\n}\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  bgcolor: 'background.paper',\r\n  border: '2px solid #000',\r\n  boxShadow: 24,\r\n  p: 4,\r\n  overflowY: 'auto'\r\n}\r\n\r\nconst columns = [\r\n  {field: 'name', headerName: 'Name', width: 200},\r\n  {field: 'dominantMuscle', headerName: 'Target Muscle', width: 170},\r\n  {field: 'exerciseSubType', headerName: 'Exercise Type', width: 170}\r\n]\r\n\r\nclass CreateWorkout extends React.Component \r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      workoutName: \"\",\r\n      workoutLength: 45,\r\n      workoutSets: 3,\r\n      workoutReps: 10,\r\n      muscleGroup: '',\r\n      intensity: '',\r\n      creator: '',\r\n      exercises: [],\r\n      selectedExercises: [],\r\n      exerciseCreateOpen: false,\r\n      redirect: false\r\n    }\r\n\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.handleMuscleGroupChange = this.handleMuscleGroupChange.bind(this);\r\n    this.handleIntensityChange = this.handleIntensityChange.bind(this);\r\n    this.createWorkout = this.createWorkout.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n  }\r\n\r\n  handleTextBoxChange(e) {\r\n    if (e.target.id === \"workout-name\")\r\n    {\r\n      this.setState({workoutName: e.target.value})\r\n    }\r\n    if (e.target.id === \"workout-length\")\r\n    {\r\n      this.setState({workoutLength: e.target.value})\r\n    }\r\n    \r\n    if (e.target.id === \"workout-sets\")\r\n    {\r\n      let sets = e.target.value;\r\n      if (sets < 1) { sets = 1}\r\n      if (sets > 8) { sets = 8}\r\n      this.setState({workoutSets: sets})\r\n    }\r\n\r\n    if (e.target.id === \"workout-reps\")\r\n    {\r\n      let reps = e.target.value;\r\n      if (reps < 1) { reps = 1}\r\n      this.setState({workoutReps: reps})\r\n    }\r\n  }\r\n\r\n  handleMuscleGroupChange(e) {\r\n    this.setState({muscleGroup: e.target.value})\r\n  }\r\n\r\n  handleIntensityChange(e) {\r\n    this.setState({intensity: e.target.value})\r\n  }\r\n\r\n  async createWorkout() {\r\n    if (this.props.modalCloser)\r\n    {\r\n      this.props.modalCloser();\r\n    }\r\n    console.log(\"Creating workout...\")\r\n    let exercises = [];\r\n\r\n    for (let i = 0; i < this.state.selectedExercises.length; i++)\r\n    {\r\n      let exerciseMap = {};\r\n      let docRef = doc(this.context.database, \"exercises\", this.state.selectedExercises[i]);\r\n      exerciseMap['exerciseId'] = docRef\r\n      exerciseMap['reps'] = this.state.workoutReps\r\n      exercises.push(exerciseMap);\r\n    }\r\n\r\n    // console.log(exercises)\r\n\r\n    const docRef = await addDoc(collection(this.context.database, \"workouts\"), {\r\n      name: this.state.workoutName,\r\n      sets: this.state.workoutSets,\r\n      length: this.state.workoutLength,\r\n      intensity: this.state.intensity,\r\n      targetMuscleGroup: this.state.muscleGroup,\r\n      exercises: exercises\r\n    })\r\n\r\n    console.log(\"Document added to Firestore: \" + docRef.id);\r\n    this.setState({redirect: true})\r\n  }\r\n\r\n  valuetext(value) {\r\n    return `${value}°C`;\r\n  }\r\n\r\n  openModal() {\r\n    this.setState({exerciseCreateOpen: true})\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({exerciseCreateOpen: false})\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"exercises\"), where(\"exerciseType\", \"==\", \"resistance\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const exercises = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          // console.log(doc.id);\r\n          exercises.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      if (exercises.length !== this.state.exercises.length)\r\n      {\r\n        this.setState({exercises: exercises})\r\n      }\r\n    });\r\n\r\n    \r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div style={{display:'flex', marginBottom: 66, justifyContent: 'center', height: '100%'}}>\r\n      {(this.state.redirect) && <Redirect push to={`edit-workouts`} />}\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={12}>\r\n        {/* <Typography variant=\"h4\" style={{display:'flex', justifyContent: 'center'}}>\r\n          Create a Workout\r\n        </Typography> */}\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Workout Name</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-name\"\r\n              type=\"text\"\r\n              \r\n              value={this.state.workoutName}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Workout Name\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n        <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Target Muscle Group</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"muscle-group-select\"\r\n              value={this.state.muscleGroup}\r\n              label=\"Target Muscle Group\"\r\n              onChange={this.handleMuscleGroupChange}\r\n              >\r\n                <MenuItem value=\"Full Body\">Full Body</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Back\">Back</MenuItem>\r\n                <MenuItem value=\"Arms\">Arms</MenuItem>\r\n                <MenuItem value=\"Core\">Core</MenuItem>\r\n                <MenuItem value=\"Legs\">Legs</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            {/* <InputLabel htmlFor=\"outlined-name\">Workout Length (mins)</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-length\"\r\n              type=\"number\"\r\n              value={this.state.workoutLength}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Workout Length (mins)\"\r\n            /> */}\r\n            <Typography>\r\n              Length (Minutes)\r\n            </Typography>\r\n            <Slider\r\n              id=\"workout-length\"\r\n              aria-label=\"Length\"\r\n              style={{width: '95%'}}\r\n              defaultValue={45}\r\n              getAriaValueText={this.valuetext}\r\n              valueLabelDisplay=\"auto\"\r\n              step={15}\r\n              marks\r\n              min={0}\r\n              max={180}\r\n              onChange={this.handleTextBoxChange}\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={2}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Sets</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-sets\"\r\n              type=\"number\"\r\n              value={this.state.workoutSets}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Sets\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={2}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Reps</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-reps\"\r\n              type=\"number\"\r\n              value={this.state.workoutReps}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Reps\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n        <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Workout Intensity</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"workout-intensity\"\r\n              value={this.state.intensity}\r\n              label=\"Workout Intensity\"\r\n              onChange={this.handleIntensityChange}\r\n              >\r\n                <MenuItem value=\"1\">Light</MenuItem>\r\n                <MenuItem value=\"2\">Medium</MenuItem>\r\n                <MenuItem value=\"3\">Heavy</MenuItem>\r\n                <MenuItem value=\"4\">Extreme</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          {/* <Typography variant=\"h6\" style={{marginTop: 4, display:'flex', justifyContent: 'center'}}>\r\n            Exercises\r\n          </Typography> */}\r\n          {(this.state.exercises.length > 0) &&\r\n          <div>\r\n          <DataGrid\r\n          rows={this.state.exercises}\r\n          columns={columns}\r\n          autoHeight\r\n          pageSize={5}\r\n          rowsPerPageOptions={[5]}\r\n          checkboxSelection\r\n          onSelectionModelChange={(selectedId) => {\r\n            this.setState({selectedExercises: selectedId}, () => console.log(this.state.selectedExercises))\r\n          }}\r\n          />\r\n          </div>\r\n          }\r\n          \r\n        </Grid>\r\n        <Grid item xs={12} style={{display:'flex', justifyContent: 'center', marginTop: 4, marginBottom: 8}}>\r\n        <Button variant=\"contained\" onClick={this.openModal} style={{marginRight: 4}}>\r\n          Add New Exercise\r\n        </Button>\r\n        \r\n        <Modal\r\n          open={this.state.exerciseCreateOpen}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\">\r\n            <Box style={modalStyle}>\r\n              <CreateExercise />\r\n            </Box>\r\n        </Modal>\r\n        <Button variant=\"contained\" color=\"success\" \r\n        disabled={(this.state.workoutName.length > 0 \r\n                    && this.state.muscleGroup.length > 0 \r\n                    && this.state.intensity.length > 0\r\n                    && this.state.selectedExercises.length > 0) ? false : true } \r\n        onClick={this.createWorkout}>\r\n          Create Workout\r\n        </Button>\r\n        </Grid>\r\n      </Grid>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CreateWorkout;","import React from \"react\";\nimport DateTimePicker from '@mui/lab/DateTimePicker';\nimport TextField from '@mui/material/TextField';\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport Typography from '@mui/material/Typography';\n\nimport locale from 'date-fns/locale/en-IE';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport Modal from '@mui/material/Modal';\nimport Paper from '@mui/material/Paper';\nimport {FirebaseContext} from \"../../config/firebase\";\nimport { collection, doc, addDoc, query, where, onSnapshot, deleteDoc  } from \"firebase/firestore\";\nimport { Redirect } from 'react-router-dom';\n\nconst smallModalStyle = {\n  position: 'absolute',\n  marginTop: 8,\n  top: '20%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: '90vw',\n  bgcolor: 'background.paper',\n  // border: '2px solid #000',\n  boxShadow: 24,\n  padding: 4,\n  display: 'flex', \n  justifyContent: 'center', \n  flexDirection: 'column', \n  gap: 12\n}\n\nclass CreateUserWorkout extends React.Component \n{\n  static contextType = FirebaseContext;\n  constructor(props)\n  {\n    super(props);\n    \n    let date = new Date();\n    let dateString = \"\";\n    dateString = date.getFullYear() + \" \" +  (date.getMonth()+1) + \" \" + date.getDate();\n    this.state = {\n      date : date,\n      dateString: dateString\n    }\n    console.log(date + \" \" + dateString);\n    this.handleChange = this.handleChange.bind(this);\n    this.scheduleWorkout = this.scheduleWorkout.bind(this);\n    this.switchStartModalState = this.switchStartModalState.bind(this);\n  }\n\n  handleChange(newDate) {\n    \n    this.setState({date: newDate})\n\n    \n  }\n\n  switchStartModalState() {\n    this.setState({startWorkoutOpen: !this.state.startWorkoutOpen})\n  }\n\n  async scheduleWorkout() {\n    const exercises = this.props.workout.exercises\n    const workoutRef = doc(this.context.database, \"workouts\", this.props.workout.id);\n    const userRef = doc(this.context.database, \"users\", this.context.user.uid)\n    \n    exercises.forEach(exercise => {\n      const sets = [];\n      for (let i = 0; i < this.props.workout.sets; i++)\n      {\n        let set = {}\n        set.reps = exercise.reps\n        set.weight = 0\n        sets.push(set)\n      }\n      exercise.sets = sets;\n    })\n\n    // console.log(workoutRef)\n    // console.log(userRef)\n    // console.log(exercises)\n\n    const userWorkout = await addDoc(collection(this.context.database, \"user-workouts\"), {\n      completed: false,\n      date: this.state.date,\n      dateString: this.state.dateString,\n      exercises: exercises,\n      user: userRef,\n      workout: workoutRef\n    });\n    this.switchStartModalState();\n    console.log(\"User Workout added to database: \" + userWorkout.id)\n  }\n\n  render() {\n    return (\n      <div>\n        <Button onClick={this.switchStartModalState}>\n                      Start Workout\n        </Button>\n        <Modal\n            open={this.state.startWorkoutOpen}\n            onClose={this.switchStartModalState}\n            aria-labelledby={this.props.workout.id}\n            aria-describedby={this.props.workout.name}>\n            <Box style={smallModalStyle}>\n              <Paper style={{padding: 12, display: 'flex', \n                    justifyContent: 'center', \n                    flexDirection: 'column', \n                    gap: 12}}>\n            <Typography variant=\"h4\">\n              Schedule Workout\n            </Typography>\n            <Typography variant=\"h5\">\n            \n            {this.props.workout.name}\n            </Typography>\n            <LocalizationProvider dateAdapter={AdapterDateFns} locale={locale}>\n            <DateTimePicker\n              label=\"Pick a Date and Time\"\n              value={this.state.date}\n              onChange={this.handleChange}\n              \n              renderInput={(params) => <TextField {...params} />}\n            />\n            </ LocalizationProvider>\n            <Button variant=\"contained\" color=\"success\" onClick={this.scheduleWorkout}>\n              Schedule Workout\n            </Button>\n        </Paper>\n      </Box>\n      </Modal>\n      </div>\n    )\n  }\n}\n\nexport default CreateUserWorkout;\n\n","import React from \"react\";\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, query, onSnapshot  } from \"firebase/firestore\";\r\n\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport Grid from '@mui/material/Grid';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TablePagination from '@mui/material/TablePagination';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Select from '@mui/material/Select';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport TextField from '@mui/material/TextField';\r\n\r\n\r\nclass WorkoutSelector extends React.Component\r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      workouts: [],\r\n      rowsPerPage: 5,\r\n      page: 0,\r\n      selected: null,\r\n      muscleGroup: \"\",\r\n      search: \"\"\r\n    }\r\n\r\n    this.handleClick = this.handleClick.bind(this)\r\n    this.handleChangePage = this.handleChangePage.bind(this)\r\n    this.handleChangeRowsPerPage = this.handleChangeRowsPerPage.bind(this)\r\n    this.handleMuscleGroupChange = this.handleMuscleGroupChange.bind(this)\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this)\r\n  }\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"workouts\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const workouts = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          \r\n          workouts.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // {\r\n        // console.log(workouts)\r\n        this.setState({workouts: workouts})\r\n      // }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  filterByMuscleGroup(muscleGroup) {\r\n    return function (workout) {\r\n      if (muscleGroup !== \"\")\r\n      {\r\n        return workout.targetMuscleGroup === muscleGroup\r\n      }\r\n      else\r\n      {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  filterBySearch(search)\r\n  {\r\n    return function (workout) {\r\n      if (search !== \"\")\r\n      {\r\n        return (\r\n          workout.name.toLowerCase().includes(search.toLowerCase()) ||\r\n          workout.targetMuscleGroup.toLowerCase().includes(search.toLowerCase())\r\n        )\r\n      }\r\n      else return true;\r\n    }\r\n  }\r\n\r\n  handleChangePage(event, newPage) {\r\n    this.setState({page: newPage})\r\n  }\r\n\r\n  handleChangeRowsPerPage(event) {\r\n    this.setState({rowsPerPage: parseInt(event.target.value, 10), page: 0});\r\n\r\n  }\r\n\r\n  handleMuscleGroupChange(e) {\r\n    this.setState({muscleGroup: e.target.value})\r\n  }\r\n\r\n  handleClick(event, row)\r\n  {\r\n      if (row.id === this.state.selected)\r\n      {\r\n        this.setState({selected: null});\r\n        this.props.updateWorkout(null, [])\r\n      }\r\n      else \r\n      {\r\n        this.setState({selected: row.id})\r\n        this.props.updateWorkout(row, row.exercises )\r\n      }\r\n  }\r\n\r\n  handleTextBoxChange(e) {\r\n    if (e.target.id === \"search\")\r\n    {\r\n      this.setState({search: e.target.value})\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={6}>\r\n        <TextField fullWidth id=\"search\" onChange={this.handleTextBoxChange} label=\"Search\" variant=\"outlined\" />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n        \r\n        <FormControl fullWidth>\r\n        <InputLabel htmlFor=\"primary-muscle-select-label\">Target Muscle Group</InputLabel>\r\n        <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"muscle-group-select\"\r\n              value={this.state.muscleGroup}\r\n              label=\"Target Muscle Group\"\r\n              fullWidth\r\n              onChange={this.handleMuscleGroupChange}\r\n              >\r\n                <MenuItem value=\"\">All</MenuItem>\r\n                <MenuItem value=\"Full Body\">Full Body</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Back\">Back</MenuItem>\r\n                <MenuItem value=\"Arms\">Arms</MenuItem>\r\n                <MenuItem value=\"Core\">Core</MenuItem>\r\n                <MenuItem value=\"Legs\">Legs</MenuItem>\r\n            </Select>\r\n        </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>\r\n\r\n              </TableCell>\r\n              <TableCell>\r\n                  Name\r\n              </TableCell>\r\n              <TableCell>\r\n                  Muscle Group\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n          {this.state.workouts\r\n          .filter(this.filterBySearch(this.state.search))\r\n          .filter(this.filterByMuscleGroup(this.state.muscleGroup))\r\n          .slice(this.state.page * this.state.rowsPerPage, this.state.page * this.state.rowsPerPage + this.state.rowsPerPage)\r\n          .map((row, i) => (\r\n                <TableRow id={row.id} onClick={(event) => this.handleClick(event, row)}>\r\n                  <TableCell>\r\n                   <Checkbox\r\n                          color=\"primary\"\r\n                          checked={(row.id === this.state.selected) ? true : false}\r\n                          inputProps={{\r\n                            'aria-labelledby': row.id,\r\n                          }}\r\n                        />\r\n                  </TableCell>\r\n                  <TableCell>{row.name}</TableCell>\r\n                  <TableCell>{row.targetMuscleGroup}</TableCell>\r\n                </TableRow>\r\n          ))}\r\n          </TableBody>\r\n          \r\n        </Table>\r\n        <TablePagination\r\n          style={{width:'99%', scroll: 'none'}}\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={this.state.workouts.length}\r\n          rowsPerPage={this.state.rowsPerPage}\r\n          page={this.state.page}\r\n          onPageChange={this.handleChangePage}\r\n          onRowsPerPageChange={this.handleChangeRowsPerPage}\r\n        />\r\n        </Grid>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WorkoutSelector;","import React from \"react\";\r\n\r\nimport CreateUserWorkout from \"../user-workouts/CreateUserWorkout.js\";\r\nimport WorkoutSelector from \"./WorkoutSelector\"\r\n\r\nimport TextField from '@mui/material/TextField';\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DateTimePicker from '@mui/lab/DateTimePicker';\r\nimport locale from 'date-fns/locale/en-IE';\r\nimport Typography from '@mui/material/Typography';\r\nimport Grid from '@mui/material/Grid';\r\nimport Button from '@mui/material/Button';\r\nimport { Redirect } from 'react-router-dom';\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, doc, addDoc, query, where, onSnapshot, deleteDoc  } from \"firebase/firestore\";\r\n\r\nconst inputStyle = {\r\n  \r\n}\r\n\r\nclass CreateCustomWorkout extends React.Component\r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props)\r\n    let date = new Date();\r\n    let dateString = \"\";\r\n    dateString = date.getFullYear() + \" \" +  (date.getMonth()+1) + \" \" + date.getDate();\r\n    this.state = {\r\n      date : date,\r\n      dateString: dateString,\r\n      sets: null,\r\n      workout: null,\r\n      exercises: [],\r\n      userWorkout: \"\"\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.startWorkout = this.startWorkout.bind(this);\r\n    this.updateWorkout = this.updateWorkout.bind(this);\r\n  }\r\n\r\n  handleChange(newDate) {\r\n    this.setState({date: newDate})\r\n  }\r\n\r\n  handleTextBoxChange(e) {\r\n    if (e.target.id === \"sets\")\r\n    {\r\n      if (e.target.value > 0)\r\n      {\r\n        this.setState({sets: e.target.value});\r\n      }\r\n    }\r\n  }\r\n\r\n  updateWorkout(workout,exercises) {\r\n    this.setState({workout: workout, exercises: exercises})\r\n  }\r\n\r\n  async startWorkout() \r\n  {\r\n    // console.log(this.state)\r\n    const exercises = this.state.exercises\r\n    const workoutRef = doc(this.context.database, \"workouts\", this.state.workout.id);\r\n    const userRef = doc(this.context.database, \"users\", this.context.user.uid)\r\n    exercises.forEach(exercise => {\r\n      const sets = [];\r\n      for (let i = 0; i < this.state.workout.sets; i++)\r\n      {\r\n        let set = {}\r\n        set.reps = exercise.reps\r\n        set.weight = 0\r\n        sets.push(set)\r\n      }\r\n      exercise.sets = sets;\r\n    })\r\n\r\n    // console.log(workoutRef)\r\n    // console.log(userRef)\r\n    // console.log(exercises)\r\n\r\n    const userWorkout = await addDoc(collection(this.context.database, \"user-workouts\"), {\r\n      completed: false,\r\n      date: this.state.date,\r\n      dateString: this.state.dateString,\r\n      exercises: exercises,\r\n      user: userRef,\r\n      workout: workoutRef\r\n    });\r\n    // this.switchStartModalState();\r\n    console.log(\"User Workout added to database: \" + userWorkout.id)\r\n    this.setState({redirect: true, userWorkout: userWorkout.id})\r\n    // window.location.assign(\"workout/\" + userWorkout.id);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      \r\n      <Grid container spacing={2} style={{marginBottom: 66}} >\r\n        {(this.state.redirect) && <Redirect push to={`workout/${this.state.userWorkout}`} />}\r\n        <Grid item xs={12} style={{display: 'flex', justifyContent: 'center'}}>\r\n        <Typography variant=\"h4\">\r\n        {/* Start a Workout */}\r\n        </Typography>\r\n        </Grid>\r\n        <Grid item xs={12} sm={12} lg={12} style={{display:'flex', flexDirection: 'column', gap: 8}}>\r\n        <LocalizationProvider dateAdapter={AdapterDateFns} locale={locale}>\r\n            <DateTimePicker\r\n              label=\"Pick a Date and Time\"\r\n              value={this.state.date}\r\n              onChange={this.handleChange}\r\n              \r\n              renderInput={(params) => <TextField fullWidth style={inputStyle} {...params} />}\r\n            />\r\n        </ LocalizationProvider>\r\n        \r\n        </Grid>\r\n        <Grid item xs={12} sm={12}>\r\n          <WorkoutSelector updateWorkout={this.updateWorkout} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button variant=\"contained\" onClick={this.startWorkout} disabled={(this.state.workout) ? false : true } color=\"success\" style={{width: '100%'}}>\r\n              Start Workout\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CreateCustomWorkout","import React from \"react\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Slider from \"@mui/material/Slider\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport { DataGrid } from '@mui/x-data-grid';\r\n\r\nimport CreateExercise from \"./CreateExercise\";\r\n\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, doc, updateDoc, query, where, onSnapshot, deleteDoc  } from \"firebase/firestore\";\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\n\r\nconst inputStyle = {\r\n  backgroundColor: 'white',\r\n  // marginBottom: '.5em'\r\n  // width: '85vw'\r\n}\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  bgcolor: 'background.paper',\r\n  // border: '1px solid #000',\r\n  boxShadow: 24,\r\n  \r\n}\r\n\r\nconst columns = [\r\n  {field: 'name', headerName: 'Name', width: 200},\r\n  {field: 'dominantMuscle', headerName: 'Target Muscle', width: 170},\r\n  {field: 'exerciseSubType', headerName: 'Exercise Type', width: 170}\r\n]\r\n\r\nclass EditWorkout extends React.Component \r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    const exercisesWithID = []\r\n    this.props.workout.exercises.forEach((exercise) => {\r\n      exercisesWithID.push(exercise.exerciseId.id);\r\n    })\r\n\r\n    this.state = {\r\n      open: false,\r\n      workoutName: this.props.workout.name,\r\n      workoutLength: this.props.workout.length,\r\n      workoutSets: this.props.workout.sets,\r\n      workoutReps: this.props.workout.exercises[0].reps,\r\n      muscleGroup: this.props.workout.targetMuscleGroup,\r\n      intensity: this.props.workout.intensity,\r\n      creator: '',\r\n      exercises: this.props.workout.exercises,\r\n      selectedExercises: exercisesWithID,\r\n      exerciseCreateOpen: false,\r\n      openDeleteDialog: false\r\n    }\r\n    \r\n\r\n    \r\n\r\n    this.setState({selectedExercises: exercisesWithID});\r\n\r\n    \r\n\r\n    this.handleTextBoxChange = this.handleTextBoxChange.bind(this);\r\n    this.handleMuscleGroupChange = this.handleMuscleGroupChange.bind(this);\r\n    this.handleIntensityChange = this.handleIntensityChange.bind(this);\r\n    this.createWorkout = this.createWorkout.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleParentModalState = this.handleParentModalState.bind(this);\r\n    this.deleteWorkout = this.deleteWorkout.bind(this);\r\n    this.handleChangeDialogStatus = this.handleChangeDialogStatus.bind(this);\r\n  }\r\n\r\n  handleTextBoxChange(e) {\r\n    if (e.target.id === \"workout-name\")\r\n    {\r\n      this.setState({workoutName: e.target.value})\r\n    }\r\n    if (e.target.id === \"workout-length\")\r\n    {\r\n      this.setState({workoutLength: e.target.value})\r\n    }\r\n    \r\n    if (e.target.id === \"workout-sets\")\r\n    {\r\n      let sets = e.target.value;\r\n      if (sets < 1) { sets = 1}\r\n      this.setState({workoutSets: sets})\r\n    }\r\n\r\n    if (e.target.id === \"workout-reps\")\r\n    {\r\n      let reps = e.target.value;\r\n      if (reps < 1) { reps = 1}\r\n      this.setState({workoutReps: reps})\r\n    }\r\n  }\r\n\r\n  handleMuscleGroupChange(e) {\r\n    this.setState({muscleGroup: e.target.value})\r\n  }\r\n\r\n  handleIntensityChange(e) {\r\n    this.setState({intensity: e.target.value})\r\n  }\r\n\r\n  async createWorkout() {\r\n    console.log(\"Creating workout...\")\r\n    let exercises = [];\r\n\r\n    for (let i = 0; i < this.state.selectedExercises.length; i++)\r\n    {\r\n      let exerciseMap = {};\r\n      let docRef = doc(this.context.database, \"exercises\", this.state.selectedExercises[i]);\r\n      exerciseMap['exerciseId'] = docRef\r\n      exerciseMap['reps'] = this.state.workoutReps\r\n      exercises.push(exerciseMap);\r\n    }\r\n\r\n    // console.log(exercises)\r\n    const docRef = doc(this.context.database, \"workouts\", this.props.workout.id);\r\n    await updateDoc(docRef, {\r\n      name: this.state.workoutName,\r\n      sets: this.state.workoutSets,\r\n      length: this.state.workoutLength,\r\n      intensity: this.state.intensity,\r\n      targetMuscleGroup: this.state.muscleGroup,\r\n      exercises: exercises\r\n    })\r\n    this.handleParentModalState()\r\n    console.log(\"Document added to Firestore: \" + docRef.id);\r\n  }\r\n\r\n  async deleteWorkout() {\r\n    const docRef = doc(this.context.database, \"workouts\", this.props.workout.id)\r\n    await deleteDoc(docRef);\r\n    this.handleChangeDialogStatus()\r\n    this.handleParentModalState()\r\n  }\r\n\r\n  valuetext(value) {\r\n    return `${value}°C`;\r\n  }\r\n\r\n  openModal() {\r\n    this.setState({exerciseCreateOpen: true})\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({exerciseCreateOpen: false})\r\n  }\r\n\r\n  handleParentModalState() {\r\n    this.setState({open: !this.state.open})\r\n    \r\n  }\r\n\r\n  handleChangeDialogStatus() {\r\n    this.setState({openDeleteDialog: !this.state.openDeleteDialog})\r\n  }\r\n\r\n  \r\n\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"exercises\"), where(\"exerciseType\", \"==\", \"resistance\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const exercises = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          // console.log(doc.id);\r\n          exercises.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      if (exercises.length !== this.state.exercises.length)\r\n      {\r\n        this.setState({exercises: exercises})\r\n      }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n      <Button onClick={this.handleParentModalState}>\r\n        Edit\r\n      </Button>\r\n      <Modal\r\n        open={this.state.open}\r\n        onClose={this.handleParentModalState}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n      <Box style={modalStyle}>\r\n      <Paper style={{padding: 12}}>\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={12}>\r\n        {/* <Typography variant=\"h4\" style={{display:'flex', justifyContent: 'center'}}>\r\n          Create a Workout\r\n        </Typography> */}\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Workout Name</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-name\"\r\n              type=\"text\"\r\n              \r\n              value={this.state.workoutName}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Workout Name\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n        <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Target Muscle Group</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"muscle-group-select\"\r\n              value={this.state.muscleGroup}\r\n              label=\"Target Muscle Group\"\r\n              onChange={this.handleMuscleGroupChange}\r\n              >\r\n                <MenuItem value=\"Full Body\">Full Body</MenuItem>\r\n                <MenuItem value=\"Chest\">Chest</MenuItem>\r\n                <MenuItem value=\"Shoulders\">Shoulders</MenuItem>\r\n                <MenuItem value=\"Back\">Back</MenuItem>\r\n                <MenuItem value=\"Arms\">Arms</MenuItem>\r\n                <MenuItem value=\"Core\">Core</MenuItem>\r\n                <MenuItem value=\"Legs\">Legs</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            {/* <InputLabel htmlFor=\"outlined-name\">Workout Length (mins)</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-length\"\r\n              type=\"number\"\r\n              value={this.state.workoutLength}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Workout Length (mins)\"\r\n            /> */}\r\n            <Typography>\r\n              Length (Minutes)\r\n            </Typography>\r\n            <Slider\r\n              id=\"workout-length\"\r\n              aria-label=\"Length\"\r\n              style={{width: '95%'}}\r\n              defaultValue={45}\r\n              getAriaValueText={this.valuetext}\r\n              valueLabelDisplay=\"auto\"\r\n              step={15}\r\n              marks\r\n              min={0}\r\n              max={180}\r\n              onChange={this.handleTextBoxChange}\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={2}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Sets</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-sets\"\r\n              type=\"number\"\r\n              value={this.state.workoutSets}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Sets\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={2}>\r\n          <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-name\">Reps</InputLabel>\r\n            <OutlinedInput\r\n              id=\"workout-reps\"\r\n              type=\"number\"\r\n              value={this.state.workoutReps}\r\n              onChange={this.handleTextBoxChange}\r\n              label=\"Reps\"\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4}>\r\n        <FormControl sx={inputStyle} fullWidth variant=\"outlined\" required>\r\n            <InputLabel htmlFor=\"outlined-adornment-password\">Workout Intensity</InputLabel>\r\n            <Select\r\n              labelId=\"primary-muscle-select-label\"\r\n              id=\"workout-intensity\"\r\n              value={this.state.intensity}\r\n              label=\"Workout Intensity\"\r\n              onChange={this.handleIntensityChange}\r\n              >\r\n                <MenuItem value=\"1\">Light</MenuItem>\r\n                <MenuItem value=\"2\">Medium</MenuItem>\r\n                <MenuItem value=\"3\">Heavy</MenuItem>\r\n                <MenuItem value=\"4\">Extreme</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          {/* <Typography variant=\"h6\" style={{marginTop: 4, display:'flex', justifyContent: 'center'}}>\r\n            Exercises\r\n          </Typography> */}\r\n          {(this.state.exercises.length > 0) &&\r\n          <div>\r\n          <DataGrid\r\n          rows={this.state.exercises}\r\n          columns={columns}\r\n          autoHeight\r\n          pageSize={5}\r\n          rowsPerPageOptions={[5]}\r\n          checkboxSelection\r\n          onSelectionModelChange={(selectedId) => {\r\n            this.setState({selectedExercises: selectedId}, () => console.log(this.state.selectedExercises))\r\n          }}\r\n          selectionModel={this.state.selectedExercises}\r\n          \r\n          />\r\n          </div>\r\n          }\r\n          \r\n        </Grid>\r\n        <Grid item xs={12} style={{display:'flex', justifyContent: 'center', gap: 4, marginTop: 4}}>\r\n        <Button variant=\"contained\" onClick={this.openModal} >\r\n          Add New Exercise\r\n        </Button>\r\n        <Modal\r\n          open={this.state.exerciseCreateOpen}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\">\r\n            <Box style={modalStyle}>\r\n              <CreateExercise />\r\n            </Box>\r\n        </Modal>\r\n        <Button variant=\"contained\" color=\"success\" onClick={this.createWorkout}>\r\n          Edit Workout\r\n        </Button>\r\n        <Button variant=\"contained\" color=\"error\" onClick={this.handleChangeDialogStatus}>\r\n          Delete Workout\r\n        </Button>\r\n        </Grid>\r\n      </Grid>\r\n      </Paper>\r\n      </Box>\r\n      \r\n      </Modal>\r\n      <Dialog\r\n        open={this.state.openDeleteDialog}\r\n        onClose={this.handleChangeDialogStatus}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n        >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Delete this workout?\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            You are about to delete the workout: <b>{this.props.workout.name}</b>.\r\n\r\n            This data will be immediately deleted and cannot be retrieved afterwards.\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleChangeDialogStatus}>Disagree</Button>\r\n          <Button onClick={this.deleteWorkout} autoFocus>\r\n            Agree\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditWorkout;","import React from \"react\"\r\n\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TablePagination from '@mui/material/TablePagination';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Button from '@mui/material/Button';\r\nimport Modal from '@mui/material/Modal';\r\nimport Box from '@mui/material/Box';\r\nimport Paper from '@mui/material/Paper';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nimport {FirebaseContext} from \"../../config/firebase\";\r\nimport { collection, query, onSnapshot  } from \"firebase/firestore\";\r\n\r\nimport EditWorkout from \"./EditWorkout\";\r\nimport CreateWorkout from \"./CreateWorkout\";\r\nimport CreateUserWorkout from \"../user-workouts/CreateUserWorkout\";\r\n\r\nconst tableHead = {\r\n  fontWeight: 550\r\n}\r\n\r\nconst modalStyle = {\r\n  position: 'absolute',\r\n  marginTop: 8,\r\n  top: '50%',\r\n  left: '50%',\r\n  transform: 'translate(-50%, -50%)',\r\n  width: '90vw',\r\n  bgcolor: 'background.paper',\r\n  // border: '2px solid #000',\r\n  boxShadow: 24,\r\n  padding: 4,\r\n  overflow: 'scroll',\r\n  // overflowY: 'auto'\r\n}\r\n\r\n\r\n\r\nclass EditWorkouts extends React.Component\r\n{\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      workouts: [],\r\n      rowsPerPage: 10,\r\n      page: 0,\r\n      workoutCreateOpen: false,\r\n      startWorkoutOpen: false\r\n    }\r\n\r\n    this.handleChangePage = this.handleChangePage.bind(this);\r\n    this.handleChangeRowsPerPage = this.handleChangeRowsPerPage.bind(this);\r\n    this.switchModalState = this.switchModalState.bind(this);\r\n    // this.switchStartModalState = this.switchStartModalState.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({creator: this.context.user.uid})\r\n    const q = query(collection(this.context.database, \"workouts\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const workouts = [];\r\n      querySnapshot.forEach((doc) => {\r\n          let data = doc.data();\r\n          data.id = doc.id;\r\n          \r\n          workouts.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // {\r\n        // console.log(workouts)\r\n        this.setState({workouts: workouts})\r\n      // }\r\n    });\r\n\r\n    \r\n  }\r\n\r\n  handleChangePage(event, newPage) {\r\n    this.setState({page: newPage})\r\n  }\r\n\r\n  handleChangeRowsPerPage(event) {\r\n    this.setState({rowsPerPage: parseInt(event.target.value, 10), page: 0});\r\n\r\n  }\r\n\r\n  switchModalState() {\r\n    this.setState({workoutCreateOpen: !this.state.workoutCreateOpen})\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div style={{marginBottom: 64}}>\r\n        <TableContainer>\r\n          <Table>\r\n            <TableHead  >\r\n              <TableRow id=\"header-row\" >\r\n                <TableCell >\r\n                  <Typography style={tableHead}>Workout Name</Typography>\r\n                </TableCell>\r\n                <TableCell>\r\n                <Typography style={tableHead}>Target Muscle Group</Typography>\r\n                </TableCell>\r\n                <TableCell>\r\n                <Typography style={tableHead}>Sets</Typography>\r\n                </TableCell>\r\n                { (!this.props.selectorList) &&\r\n                <React.Fragment>\r\n                <TableCell>\r\n                </TableCell>\r\n                <TableCell>\r\n                </TableCell>\r\n                </React.Fragment>\r\n                }\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n            {this.state.workouts.slice(this.state.page * this.state.rowsPerPage, this.state.page * this.state.rowsPerPage + this.state.rowsPerPage).map((row, i) => (\r\n                <TableRow id={row.id}>\r\n                  <TableCell>{row.name}</TableCell>\r\n                  <TableCell>{row.targetMuscleGroup}</TableCell>\r\n                  <TableCell>{row.sets}</TableCell>\r\n                  { (!this.props.selectorList) &&\r\n                  <React.Fragment>\r\n                  <TableCell>\r\n                    <EditWorkout workout={row} />\r\n                  </TableCell>\r\n                  <TableCell>\r\n                          < CreateUserWorkout workout={row} modalStateChanger={this.switchStartModalState}/>\r\n\r\n                  </TableCell>\r\n                  </React.Fragment>\r\n                  }\r\n                </TableRow>\r\n              ))\r\n              \r\n\r\n              }\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={this.state.workouts.length}\r\n          rowsPerPage={this.state.rowsPerPage}\r\n          page={this.state.page}\r\n          onPageChange={this.handleChangePage}\r\n          onRowsPerPageChange={this.handleChangeRowsPerPage}\r\n        />\r\n        <Button variant=\"contained\" onClick={this.switchModalState} style={{marginRight: 4}}>\r\n          Create New Workout\r\n        </Button>\r\n        \r\n        <Modal\r\n          open={this.state.workoutCreateOpen}\r\n          onClose={this.switchModalState}\r\n          aria-labelledby=\"modal-modal-title\"\r\n          aria-describedby=\"modal-modal-description\">\r\n            <Box style={modalStyle}>\r\n              <Paper style={{paddingLeft: 12, paddingRight: 12, paddingTop: 12}}>\r\n              <CreateWorkout\r\n                modalCloser={this.switchModalState} />\r\n              </Paper>\r\n            </Box>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditWorkouts;","import React from \"react\";\r\n\r\n// Date and Time Imports\r\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\r\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\r\nimport StaticDatePicker from \"@mui/lab/StaticDatePicker\";\r\nimport locale from \"date-fns/locale/en-IE\";\r\nimport TimePicker from \"@mui/lab/TimePicker\";\r\n\r\n// Material UI Components\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Fade from \"@mui/material/Fade\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Card from \"@mui/material/Card\";\r\nimport Select from \"@mui/material/Select\";\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Button from \"@mui/material/Button\";\r\nimport DeleteIcon from \"@mui/icons-material/Delete\";\r\nimport CheckIcon from \"@mui/icons-material/Check\";\r\n\r\n//React-Router-Dom\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\n//Firebase Details\r\nimport { FirebaseContext } from \"../../config/firebase\";\r\nimport { collection, query, onSnapshot, doc, addDoc, getDoc, where, deleteDoc } from \"firebase/firestore\";\r\n\r\nconst style = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  minWidth: \"40vw\",\r\n  maxWidth: \"80vw\",\r\n  bgcolor: \"background.paper\",\r\n  border: \"3x solid #000\",\r\n  boxShadow: 6000,\r\n  p: 4\r\n};\r\n\r\nconst style2 = {\r\n  display: 'grid',\r\n  justifyContent: \"center\",\r\n  // marginLeft: 'auto'\r\n  // minWidth: \"80vw\",\r\n  // maxWidth: \"80vw\",\r\n  // transform: \"translate(-50%, -50%)\",\r\n  // bgcolor: \"background.paper\",\r\n  // border: \"12px solid #000\",\r\n  // boxShadow: 6000,\r\n  // p: 4\r\n};\r\n\r\nclass Calendar extends React.Component {\r\n  static contextType = FirebaseContext;\r\n  constructor(props) {\r\n    super(props);\r\n    let date = new Date();\r\n    let dateString = \"\";\r\n    dateString =\r\n      date.getFullYear() + \" \" + (date.getMonth() + 1) + \" \" + date.getDate();\r\n    this.state = {\r\n      user: this.props.user,\r\n      date: date,\r\n      dateString: dateString,\r\n      workouts: [],\r\n      userWorkouts: [],\r\n      workout: \"\"\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.switchStartModalState = this.switchStartModalState.bind(this);\r\n    this.openModal = this.openModal.bind(this);\r\n    this.handleOpen = this.handleOpen.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleWorkoutChange = this.handleWorkoutChange.bind(this);\r\n    this.scheduleWorkout = this.scheduleWorkout.bind(this);\r\n    this.getUserWorkouts = this.getUserWorkouts.bind(this);\r\n  }\r\n\r\n  handleChange(newDate) {\r\n    let dateString =\r\n      newDate.getFullYear() +\r\n      \" \" +\r\n      (newDate.getMonth() + 1) +\r\n      \" \" +\r\n      newDate.getDate();\r\n    this.setState({ date: newDate, dateString: dateString }, () => this.getUserWorkouts() );\r\n    \r\n    // this.switchStartModalState();\r\n  }\r\n\r\n  handleWorkoutChange(event) {\r\n    this.setState({ workout: event.target.value });\r\n  }\r\n\r\n  openModal() {\r\n    this.setState({ scheduleWorkoutModal: true });\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({ scheduleWorkoutModal: false });\r\n  }\r\n\r\n  handleOpen() {\r\n    this.setState({ scheduleWorkoutModal: false });\r\n  }\r\n\r\n  switchStartModalState() {\r\n    this.setState({ scheduleWorkoutModal: !this.state.scheduleWorkout });\r\n  }\r\n\r\n\r\n  //Firebase Pull to get User Information\r\n\r\n  //This function is called when the date is changed. It carries out a database pull.\r\n  //The snapshot is created so that the record of workouts is live and real time\r\n  //If the query returns null, we set the state to an empty array.\r\n  async getUserWorkouts() {\r\n    // console.log(\"Function called. Date: \" + this.state.dateString );\r\n    const userRef = doc(this.context.database, \"users\", this.context.user.uid);\r\n    const q2 = query(\r\n      collection(this.context.database, \"user-workouts\"),\r\n      where(\"user\", \"==\", userRef),\r\n      where(\"dateString\", \"==\", this.state.dateString)\r\n    );\r\n    // this.setState({userWorkouts: []})\r\n    const unsubscribe2 = onSnapshot(q2,  (querySnapshot) => {\r\n      const userWorkouts = [];\r\n      // console.log(querySnapshot);\r\n      querySnapshot.forEach( async (doc) => {\r\n        let data = doc.data();\r\n        data.id = doc.id;\r\n        \r\n        // const workoutRef = doc(this.context.database, \"workouts\", data.workout)\r\n        const workoutSnap = await getDoc(data.workout)\r\n        const workout = workoutSnap.data();\r\n        // console.log(workout);\r\n        data.name = workout.name\r\n        data.targetMuscleGroup = workout.targetMuscleGroup\r\n        userWorkouts.push(data);\r\n        this.setState({ userWorkouts: userWorkouts }\r\n          // , () =>     console.log(this.state.userWorkouts)\r\n          );\r\n      });\r\n\r\n      \r\n    }, this.setState({userWorkouts: []}));\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({ creator: this.context.user.uid });\r\n    const q = query(collection(this.context.database, \"workouts\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      const workouts = [];\r\n      querySnapshot.forEach((doc) => {\r\n        let data = doc.data();\r\n        data.id = doc.id;\r\n        \r\n        workouts.push(data);\r\n      });\r\n      // console.log(\"Exercises: \", exercises.join(\", \"));\r\n      // if (exercises.length !== this.state.exercises.length)\r\n      // console.log(workouts)\r\n      this.setState(\r\n        { workouts: workouts }\r\n        // , () => console.log(this.state.workouts)\r\n      );\r\n    });\r\n    this.getUserWorkouts();\r\n  }\r\n\r\n  //Firebase Push to scheduleWorkout\r\n  async scheduleWorkout() {\r\n    // console.log(this.state.workout)\r\n    const workout = this.state.workouts[this.state.workout];\r\n    const exercises = workout.exercises;\r\n    const workoutRef = doc(this.context.database, \"workouts\", workout.id);\r\n    // console.log(workoutRef)\r\n    const userRef = doc(this.context.database, \"users\", this.context.user.uid);\r\n    exercises.forEach((exercise) => {\r\n      const sets = [];\r\n      for (let i = 0; i < workout.sets; i++) {\r\n        let set = {};\r\n        set.reps = exercise.reps;\r\n        set.weight = 0;\r\n        sets.push(set);\r\n      }\r\n      exercise.sets = sets;\r\n    });\r\n\r\n    const userWorkout = await addDoc(\r\n      collection(this.context.database, \"user-workouts\"),\r\n      {\r\n        completed: false,\r\n        date: this.state.date,\r\n        dateString: this.state.dateString,\r\n        exercises: exercises,\r\n        user: userRef,\r\n        workout: workoutRef\r\n      }\r\n    );\r\n    // this.switchStartModalState();\r\n    console.log(\"User Workout added to database: \" + userWorkout.id);\r\n    this.handleClose();\r\n    // console.log(exercises)\r\n  }\r\n\r\n  async deleteWorkout(id) {\r\n    // console.log(id)\r\n    const docRef = doc(this.context.database, \"user-workouts\", id)\r\n    await deleteDoc(docRef);\r\n    this.getUserWorkouts();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      // Div for Entire Page\r\n      <div style={{ display: \"grid\", justifyContent: \"center\", marginBottom: 66 }}>\r\n        {/* // Card For Entire Page */}\r\n        <Card\r\n          sx={{\r\n            // width: 320,\r\n            maxWidth: \"90vw\",\r\n            // padding: 1,\r\n            margin: 1,\r\n            display: \"grid\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          {/* Calendar Component */}\r\n          <LocalizationProvider dateAdapter={AdapterDateFns} locale={locale}>\r\n            {/* <Paper style={{ overflow: \"auto\" }}> */}\r\n            <StaticDatePicker\r\n              orientation=\"portrait\"\r\n              openTo=\"day\"\r\n              value={this.state.date}\r\n              onChange={this.handleChange}\r\n              renderInput={(params) => <TextField {...params} />}\r\n            />\r\n            {/* Modal which will schedule workout */}\r\n            <Modal\r\n              open={this.state.scheduleWorkoutModal}\r\n              onClose={this.handleClose}\r\n              aria-labelledby=\"modal-modal-title\"\r\n              aria-describedby=\"modal-modal-description\"\r\n            >\r\n              {/* Allow the Modal to fade in */}\r\n              <Fade in={this.state.scheduleWorkoutModal}>\r\n                <Box sx={style}>\r\n                  {/* Card for the options within Box */}\r\n                  {/* <Card\r\n                    sx={{\r\n                      width: 280,\r\n                      maxWidth: \"90vw\",\r\n                      padding: 1,\r\n                      margin: 1,\r\n                      display: \"grid\",\r\n                      justifyContent: \"center\"\r\n                    }}\r\n                  > */}\r\n                    <Grid container spacing={0.5} style={{ marginTop: \"1em\" }}>\r\n                      <FormControl sx={{ m: 1, minWidth: 120 }}>\r\n                        <InputLabel id=\"demo-simple-select-label\">\r\n                          Select Workout\r\n                        </InputLabel>\r\n                        <Select\r\n                          label=\"Select Workout\"\r\n                          labelId=\"demo-simple-select-label\"\r\n                          id=\"demo-simple-select\"\r\n                          value={this.state.workout}\r\n                          onChange={this.handleWorkoutChange}\r\n                        >\r\n                          {this.state.workouts.map((workout, index) => (\r\n                            <MenuItem value={index}>{workout.name}</MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                        <TimePicker\r\n                          value={this.state.date}\r\n                          onChange={this.handleChange}\r\n                          renderInput={(params) => <TextField {...params} />}\r\n                        />\r\n                      </FormControl>\r\n                      {/* Grid for Buttons to confirm/cancel (close Modal) */}\r\n                      <Grid item xs={12} style={{ display: \"flex\", gap: 1 }}>\r\n                        <Button\r\n                          size=\"small\"\r\n                          margin=\"center\"\r\n                          onClick={this.scheduleWorkout}\r\n                          variant=\"contained\"\r\n                          style={{ float: \"center\" }}\r\n                          color=\"success\"\r\n                          endIcon={<CheckIcon />}\r\n                        >\r\n                          Confirm\r\n                        </Button>\r\n                        <Button\r\n                          size=\"small\"\r\n                          margin=\"center\"\r\n                          onClick={this.handleClose}\r\n                          variant=\"contained\"\r\n                          style={{ float: \"center\" }}\r\n                          color=\"error\"\r\n                          endIcon={<DeleteIcon />}\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                      </Grid>\r\n                    </Grid>\r\n                  {/* </Card> */}\r\n                </Box>\r\n              </Fade>\r\n            </Modal>\r\n          </LocalizationProvider>\r\n\r\n          {/* Conditional Rendering section to display User Workouts on a certain day: */}\r\n          \r\n            \r\n              <div className=\"WorkoutInfo\" style={style2}>\r\n              <Card\r\n              sx={{\r\n                    width: 480,\r\n                    // minWidth: '87%',\r\n                    maxWidth: \"75vw\",\r\n                    padding: 1,\r\n                    margin: 1,\r\n                    display: \"grid\",\r\n                    justifyContent: \"center\"\r\n              }}\r\n            >\r\n                {(this.state.userWorkouts.length > 0) && (\r\n                  <div>\r\n                  <Typography variant=\"button\" style={{fontWeight: 750}}gutterBottom>\r\n                    {(this.state.userWorkouts.length > 1)\r\n                    ? \"Workouts\" : \"Workout\"}\r\n                    \r\n                  </Typography>\r\n                  {this.state.userWorkouts.map((workout) => (\r\n                    <div id={workout.id} style={{maxWidth: '80vw', marginBottom: 4, display:'flex', gap: 4, alignItems: 'center'}}>\r\n                      <Typography variant=\"button\" >\r\n                        {workout.name}\r\n                      </Typography>\r\n                      <RouterLink to={`workout/${workout.id}`} color=\"white\">\r\n                      <Button size=\"small\" variant=\"contained\" color=\"success\">\r\n                        Start\r\n                      </Button>\r\n                      </RouterLink>\r\n                      <Button size=\"small\" variant=\"contained\" color=\"error\" onClick={() => this.deleteWorkout(workout.id)}>\r\n                        Delete\r\n                      </Button>\r\n                    </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n\r\n                {(!this.state.userWorkouts.length > 0) && (\r\n                  <Typography variant=\"button\" display=\"block\" gutterBottom>\r\n                    No Workouts Booked\r\n                  </Typography>\r\n                )}\r\n              \r\n              </Card>\r\n            </div>\r\n          <div style={{display: 'grid', justifyItems: 'center'}}>\r\n          {/* A button is required to schedule workouts.  */}\r\n          <Button\r\n            color=\"success\"\r\n            variant=\"contained\"\r\n            onClick={this.switchStartModalState}\r\n            sx={{\r\n              width: 500,\r\n              maxWidth: \"80vw\",\r\n              \r\n              padding: 1,\r\n              margin: 1,\r\n              // marginLeft: \"3vw\",\r\n              display: \"grid\",\r\n              justifyContent: \"center\",\r\n              p: 1\r\n            }}\r\n          >\r\n            Schedule Workout\r\n          </Button>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Calendar;\r\n","//This file will contain the tab bar for the bottom of the screen when the sight is viewed on mobile or tablet\r\nimport React from 'react';\r\n// import { styled } from '@mui/material/styles';\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Box from '@mui/material/Box';\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport FitnessCenterIcon from '@mui/icons-material/FitnessCenter';\r\nimport CalendarTodayIcon from '@mui/icons-material/CalendarToday';\r\n// import CssBaseline from '@mui/material/CssBaseline';\r\nimport Toolbar from '@mui/material/Toolbar';\r\n// import Typography from '@mui/material/Typography';\r\nimport IconButton from '@mui/material/IconButton';\r\n// import Button from '@mui/material/Button';\r\n// import Paper from '@mui/material/Paper';\r\n// import Fab from '@mui/material/Fab';\r\n// import List from '@mui/material/List';\r\n// import ListItem from '@mui/material/ListItem';\r\n// import ListItemAvatar from '@mui/material/ListItemAvatar';\r\n// import ListItemText from '@mui/material/ListItemText';\r\n// import ListSubheader from '@mui/material/ListSubheader';\r\n// import Avatar from '@mui/material/Avatar';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\n// import AddIcon from '@mui/icons-material/Add';\r\n// import SearchIcon from '@mui/icons-material/Search';\r\n// import MoreIcon from '@mui/icons-material/MoreVert';\r\nimport Link from '@mui/material/Link';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport AccountCircle from '@mui/icons-material/AccountCircle';\r\n\r\n// import Logout from '../users/Logout';\r\nimport Login from '../users/Login';\r\nimport SignUp from '../users/Signup';\r\n// import AccountManagement from \"../users/AccountManagement\";\r\n\r\n\r\nimport {\r\n  // BrowserRouter as Router,\r\n  // Switch,\r\n  // Route,\r\n  Link as RouterLink\r\n  // useRouteMatch,\r\n  // useParams\r\n} from \"react-router-dom\";\r\n\r\n// const LinkBehavior = React.forwardRef((props, ref) => (\r\n//   <RouterLink ref={ref} to=\"/getting-started/installation/\" {...props} />\r\n// ));\r\nlet loginOpen = false;\r\nclass AppTabBar extends React.Component {\r\n  \r\n  constructor(props){\r\n    super(props);\r\n    this.state = {user: this.props.user, anchorEl: null, open: false, openAccountMenu: false, accountAnchorEl: null};\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleModalClose = this.handleModalClose.bind(this);\r\n    this.handleAccountClick = this.handleAccountClick.bind(this);\r\n    this.handleAccountClose = this.handleAccountClose.bind(this);\r\n  }\r\n\r\n  handleModalClose() {\r\n    loginOpen = true;\r\n    this.setState({anchorEl: null, open: false});\r\n  }\r\n\r\n  handleAccountClick(e) {\r\n    this.setState({accountAnchorEl: e.currentTarget, openAccountMenu: true});\r\n  }\r\n\r\n  handleAccountClose() {\r\n    this.setState({elementAnchorEl: null, openAccountMenu: false })\r\n  }\r\n  \r\n  handleClick(e) {\r\n    this.setState({anchorEl: e.currentTarget, open: true});\r\n  }\r\n\r\n  handleClose() {\r\n    this.setState({anchorEl: null, open: false});\r\n  }\r\n\r\n  render() {\r\n    loginOpen = this.props.loginOpen;\r\n    return(\r\n      <AppBar position=\"fixed\" color=\"primary\" sx={{ top: 'auto', bottom: 0 }}>\r\n        <Toolbar>\r\n          <IconButton \r\n            color=\"inherit\" \r\n            aria-label=\"open drawer\"\r\n            aria-controls=\"tab-menu\"\r\n            aria-haspopup=\"true\"\r\n            aria-expanded={this.state.open}\r\n            onClick={this.handleClick}>\r\n          <MenuIcon />\r\n          </IconButton>\r\n          \r\n          <Menu\r\n            id=\"tab-menu\"\r\n            anchorEl={this.state.anchorEl}\r\n            open={this.state.open}\r\n            onClose={this.handleClose}\r\n            >\r\n              {(this.props.user.name) ?\r\n              <div>\r\n              <Link component={RouterLink} to=\"/\"><MenuItem onClick={this.handleClose}>My Home</MenuItem></Link>\r\n              {/* <Link component={RouterLink} to=\"/workout/Z1IU9qDSjXHXbb6ZQSR0\"><MenuItem onClick={this.handleClose}>Workout</MenuItem></Link> */}\r\n              <Link component={RouterLink} to=\"/my-calendar\"><MenuItem onClick={this.handleClose}>My Calendar</MenuItem></Link>\r\n              <Link component={RouterLink} to=\"/creation-center\"><MenuItem onClick={this.handleClose}>Creation Center</MenuItem></Link>\r\n              \r\n              <MenuItem onClick={() => {this.props.appLogoutHandler(); this.handleAccountClose();}}>Log Out</MenuItem>\r\n              </div>:\r\n              <div>\r\n                <Login \r\n                    appLoginHandler={this.props.appLoginHandler} \r\n                    open={loginOpen}\r\n                    loggingIn = {this.props.loggingIn}\r\n                    closeMenu={this.handleModalClose}\r\n                    //passing ref into the component to allow us to call functions on the child from the parent\r\n                    ref = {this.props.loginRef}\r\n                />\r\n                <SignUp \r\n                    appSignUpHandler={this.props.appSignUpHandler} \r\n                    signUpSubmit={this.props.signUpSubmit} \r\n                    open={this.props.signUpOpen}\r\n                    closeMenu={this.handleModalClose}\r\n                    ref = {this.props.signUpRef}/>\r\n              </div>}\r\n          </Menu>\r\n          {(this.props.user.name !== null) ? \r\n           <div style={{ paddingTop: 6, flexGrow: 1 , display: 'flex'}}>\r\n          <Box sx={{ flexGrow: 1 , display: 'flex', justifyContent: 'space-around'}} >\r\n          \r\n          <RouterLink to=\"/create-custom-workout\" color=\"white\">\r\n          <IconButton style={{color: \"white\"}}>\r\n          <FitnessCenterIcon />\r\n          </IconButton>\r\n          </RouterLink>     \r\n          <RouterLink to=\"/\" color=\"white\">\r\n          <IconButton style={{color: \"white\"}}>\r\n          <HomeIcon />\r\n          </IconButton>\r\n          </RouterLink>\r\n          <RouterLink to=\"/my-calendar\" color=\"white\">\r\n          <IconButton style={{color: \"white\"}}>\r\n          <CalendarTodayIcon />\r\n          </IconButton>\r\n          </RouterLink>\r\n          </Box>\r\n\r\n          {/* We use  */}\r\n          \r\n              <IconButton\r\n                size=\"large\"\r\n                aria-label=\"account of current user\"\r\n                aria-controls=\"menu-appbar\"\r\n                aria-haspopup=\"true\"\r\n                onClick={this.handleAccountClick}\r\n                color=\"inherit\"\r\n              >\r\n                <AccountCircle />\r\n              </IconButton>\r\n              <Menu\r\n                id=\"account-menu\"\r\n                anchorEl={this.state.accountAnchorEl}\r\n                open={this.state.openAccountMenu}\r\n                onClose={this.handleAccountClose}\r\n              >\r\n                <Link component={RouterLink} to=\"/account-management\"><MenuItem onClick={this.handleAccountClose}>Manage Account</MenuItem></Link>\r\n                \r\n                <MenuItem onClick={() => {this.props.appLogoutHandler(); this.handleAccountClose();}}>Log Out</MenuItem>\r\n              </Menu>\r\n             \r\n           </div>\r\n          \r\n          :\r\n          <div style={{display: 'flex'}}>\r\n          \r\n          \r\n          </div>\r\n          }\r\n          \r\n          {/* <IconButton color=\"inherit\">\r\n            <SearchIcon />\r\n          </IconButton>\r\n          <IconButton color=\"inherit\">\r\n            <MoreIcon />\r\n          </IconButton> */}\r\n        </Toolbar>\r\n      </AppBar>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AppTabBar;","import \"./styles.css\";\nimport React from \"react\";\nimport AccountManagement from \"./components/users/AccountManagement\";\nimport Home from \"./components/Home\";\nimport Splash from \"./components/Splash\";\nimport Workouts from \"./components/MyWorkouts\";\n\nimport MyWorkouts from \"./components/reports/MyWorkouts\";\n\nimport Workout from \"./components/workout/Workout\";\nimport CreationCenter from \"./components/creators/CreationCenter\";\nimport EditExercises from \"./components/creators/EditExercises\";\nimport CreateWorkout from \"./components/creators/CreateWorkout\";\n\nimport CreateCustomWorkout from \"./components/creators/CreateCustomWorkout\";\n\nimport CreateExercise from \"./components/creators/CreateExercise\";\nimport EditWorkouts from \"./components/creators/EditWorkouts\";\nimport Calendar from \"./components/calendar/Calendar\";\nimport AppTabBar from \"./components/standard-page-parts/AppTabBar\";\nimport { FirebaseContext } from \"./config/firebase\";\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  deleteUser\n} from \"firebase/auth\";\nimport { doc, getDoc, setDoc, deleteDoc } from \"firebase/firestore\";\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\n\nclass App extends React.Component {\n  static contextType = FirebaseContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: {\n        uuid: null,\n        name: null,\n        userEmail: null,\n        height: null,\n        weight: null\n      },\n      showLogin: false,\n      signUp: false,\n      redirect: false\n    };\n\n    this.loginElement = React.createRef();\n    this.signUpElement = React.createRef();\n    this.tabMenuElement = React.createRef();\n    this.splashLoginElement = React.createRef();\n\n    this.handleLogIn = this.handleLogIn.bind(this);\n    this.logOut = this.logOut.bind(this);\n    this.showSignUp = this.showSignUp.bind(this);\n    this.handleSignUp = this.handleSignUp.bind(this);\n    this.updateUserDetails = this.updateUserDetails.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n\n  // This function carries out the log in of a user to the application.\n  // This is passed to a log-in component from App, and the log in occurs\n  // on the app so the updated state can be propagated to other components via props.\n  async handleLogIn(email, password) {\n    // console.log(\"Sign in pressed\");\n    let user = null;\n    await signInWithEmailAndPassword(this.context.auth, email, password)\n      .then((userCredential) => {\n        //If we enter this zone, the log in has been successful\n        user = userCredential.user;\n        this.context.user = user;\n        this.context.authCredential = userCredential;\n      })\n      .catch((error) => {\n        //The log in has failed and Firebase will return this error message\n        //For now, this is output to console, but taking this response and\n        //outputting to a modal would be a good addition\n        const errorCode = error.code;\n        // const errorMessage = error.message;\n        //We use the ref created for the child of this component to directly call functions that change the state on that component.\n        //This allows us to hide the circular progress and display an alert to screen.\n        this.loginElement.current.receiveError(errorCode);\n        this.loginElement.current.handleSubmit();\n      });\n    //This is what a database lookup in Firestore looks like\n    //The docRef returns the address of a given document (arg3) in a given collection (arg2) within the Firestore (arg1)\n\n    if (user !== null) {\n      //Our data on users is stored in a document in the \"users\" collection that uses the UID of the user as a name.\n      const docRef = doc(this.context.database, \"users\", user.uid);\n      const docSnap = await getDoc(docRef);\n      //We try to use the data only if getDoc receives a response. In this case we have verified that the user has an associated record in the database\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        //We now set State inside this response, as we need to combine the records of the user from the Auth and the DB\n        if (this.splashLoginElement.current)\n        {\n          this.splashLoginElement.current.handleSubmit();\n        }\n        if (this.loginElement.current)\n        {\n        this.loginElement.current.handleSubmit();\n        }\n        if (this.tabMenuElement.current)\n        {\n        this.tabMenuElement.current.handleClose();\n        }\n        this.setState({\n          showLogin: false,\n          user: {\n            uuid: this.context.user.uid,\n            name: data.name,\n            height: data.height,\n            weight: data.weight,\n            userEmail: this.context.user.email\n          }\n        });\n\n        // console.log(this.state.showLogin)\n        // this.setState({user:{name: docSnap.data().name}})\n      } else {\n        console.log(\"User ID not found in database\");\n      }\n    }\n\n    // console.log(\"Parent Component logging in state:\" + this.state.loggingIn);\n  }\n\n  async handleSignUp(name, email, password, weight = 0, height = 0) {\n    let user = null;\n    // console.log(\"User Sign up requested. Name: \" + name + \", Email: \" + email + \", password \" + password + \", weight:\" + weight + \", height: \" + height)\n    await createUserWithEmailAndPassword(this.context.auth, email, password)\n      .then((userCredential) => {\n        user = userCredential.user;\n        this.context.user = user;\n        this.context.authCredential = userCredential;\n        if (!weight) {\n          weight = 0;\n        }\n        if (!height) {\n          height = 0;\n        }\n        if (!name) {\n          name = email;\n        }\n        setDoc(doc(this.context.database, \"users\", user.uid), {\n          name: name,\n          weight: weight,\n          height: height\n        });\n        this.signUpElement.current.handleSignUpProcessing();\n        this.tabMenuElement.current.handleClose();\n        this.setState({\n          signUp: false,\n          user: { uuid: user.uid, name: name, userEmail: user.email }\n        });\n      })\n      .catch((error) => {\n        let errorMessage = \"Error occurred\";\n        // const errorCode = error.code;\n        // const errorMessage = error.message;\n        // this.signUpElement.current.handleSignUpProcessing();\n        console.log(error.code);\n        if (error === \"db/name-not-provided\") {\n          errorMessage = \"Please provide a name\";\n        } else if (\n          error.code === \"auth/missing-email\" ||\n          error.code === \"auth/invalid-email\"\n        ) {\n          errorMessage = \"Missing or Invalid Email Address\";\n        } else if (error.code === \"auth/weak-password\") {\n          errorMessage = \"Password must be at least 6 characters\";\n        } else if (error.code === \"auth/email-already-in-use\") {\n          errorMessage = \"Email is already in use.\";\n        }\n\n        this.signUpElement.current.receiveError(errorMessage);\n        this.signUpElement.current.handleSignUpProcessing();\n      });\n  }\n\n  async updateUserDetails(name, weight, height) {\n    await setDoc(doc(this.context.database, \"users\", this.context.user.uid), {\n      name: name,\n      weight: weight,\n      height: height\n    }).then(() => {\n      this.setState({\n        user: {\n          uuid: this.state.user.uuid,\n          userEmail: this.state.user.userEmail,\n          name: name,\n          weight: weight,\n          height: height\n        }\n      });\n      // console.log(this.state.user);\n    });\n  }\n\n  async deleteUser() {\n    console.log(\"Delete function on main component called\");\n    await deleteUser(this.context.auth.currentUser)\n      .then(() => {\n        const docRef = doc(\n          this.context.database,\n          \"users\",\n          this.context.user.uid\n        );\n        getDoc(docRef).then((docSnap) => {\n          if (docSnap.exists()) {\n            console.log(\"User documents found in Database, Deleting...\");\n            deleteDoc(docRef);\n          } else {\n            console.log(\n              \"User ID not found in database, no documents to delete. This may be an error\"\n            );\n          }\n        });\n\n        this.setState({\n          user: {\n            uuid: null,\n            name: null,\n            userEmail: null,\n            height: null,\n            weight: null\n          }\n        });\n      })\n      .catch((error) => {\n        console.log(\"An error occurred.\");\n      });\n  }\n\n  logOut() {\n    this.setState({\n      user: {\n        uuid: null,\n        name: null,\n        userEmail: null\n      },\n      redirect: true\n    });\n  }\n\n  showSignUp() {\n    this.setState({ signUp: !this.state.signUp });\n  }\n\n  render() {\n    return (\n      <Router>\n        \n        <AppTabBar\n          ref={this.tabMenuElement}\n          user={this.state.user}\n          appLoginHandler={this.handleLogIn}\n          loginOpen={this.state.showLogin}\n          loggingIn={this.state.loggingIn}\n          //passing ref into the component to allow us to call functions on the child from the parent\n          loginRef={this.loginElement}\n          appSignUpHandler={this.showSignUp}\n          signUpSubmit={this.handleSignUp}\n          signUpRef={this.signUpElement}\n          signUpOpen={this.state.signUp}\n          appLogoutHandler={this.logOut}\n        />\n\n        <Switch>\n          {this.state.user.uuid ? (\n            <React.Fragment>\n\n              <Route path=\"/create-custom-workout\" component={() => <CreateCustomWorkout />} />\n              <Route path=\"/account-management\" component={() => ( <AccountManagement user={this.state.user} deleteHandler={this.deleteUser} updateUserDetails={this.updateUserDetails}/>)}/>\n              <Route path=\"/my-workouts\" component={() => <MyWorkouts />} />\n\n              <Route path=\"/browse-workouts\" component={() => <Workouts user={this.state.user} />} />\n              <Route path=\"/creation-center\" component={() => <CreationCenter />} />\n              <Route path=\"/edit-exercises\" component={() => <EditExercises />} />\n              <Route path=\"/edit-workouts\" component={() => <EditWorkouts />} />\n              <Route path=\"/create-workout\" component={() => <CreateWorkout />} />\n              <Route path=\"/create-exercise\" component={() => <CreateExercise />} />\n              <Route path=\"/my-calendar\" component={() => <Calendar />} />\n              <Route path={`/workout/:userWorkoutId`} component={() => <Workout user={this.state.user} />}/>\n              {/* <Route exact path=\"/home\" component={() => <Home user={this.state.user} />}/> */}\n              <Route exact path=\"/\" component={() => <Home user={this.state.user} />}/>\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n              <Route exact path=\"\" component={() => <Splash loginRef={this.splashLoginElement} appLoginHandler={this.handleLogIn} appSignUpHandler={this.showSignUp} signUpSubmit={this.handleSignUp} signUpRef={this.signUpElement} signUpOpen={this.state.signUp} />} />\n            </React.Fragment>\n          )}\n        </Switch>\n        {/* {(this.state.redirect) && <Redirect push to={`/home`} />} */}\n      </Router>\n    );\n  }\n}\n\nexport default App;\n\n             ","import { StrictMode } from \"react\";\nimport FirebaseProvider from \"./config/firebase\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <FirebaseProvider>\n    <App />\n    </FirebaseProvider>\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}